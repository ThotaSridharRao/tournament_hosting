<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="page-title">Tournament Details | EArena</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity=""
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="navbar.css">

  <style>
    /* Theme variables */
    :root {
      --bg: #0f0f10;
      --panel: #1f1f20;
      --muted: #9aa0a6;
      --copy: #e6e6e6;
      --accent: #ff4500; 
      --accent-2: #e65c00; 
      --glass: rgba(255, 255, 255, 0.05);
      --radius: 16px;
      --container: 1200px;
      --ease: 180ms cubic-bezier(.2, .9, .2, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg), #070707 140%);
      color: var(--copy);
      line-height: 1.45;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .container {
      width: min(94%, var(--container));
      margin: 0 auto;
    }

    /* Main content */
    main {
      margin-top: 60px;
      min-height: calc(100vh - 60px);
    }

    /* Tournament Hero */
    .tournament-hero {
      position: relative;
      height: 70vh;
      min-height: 500px;
      background: linear-gradient(135deg, #1a1a1a, #0f0f0f);
      display: flex;
      align-items: flex-end; /* CHANGED from 'center' */
      overflow: hidden;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    .tournament-hero::before {
      content: '';
      position: absolute;
      inset: 0;
      /* --- MODIFIED LINE --- */
      background: linear-gradient(to top, rgba(0, 0, 0, 0.9) 10%, rgba(0, 0, 0, 0.1) 60%);
      z-index: 1;
    }
    /* --- ADD THIS NEW RULE --- */
    .tournament-hero .container {
        margin: 0; /* Overrides the horizontal centering */
        padding: 0 0 4rem 4rem; /* Adds space from the bottom & left edges */
    }

    .hero-content {
      position: relative;
      z-index: 2;
      max-width: 800px;
      padding-bottom: 4rem; /* ADDED */
      text-align: left;     /* ADDED */
    }

    .tournament-title {
      font-size: clamp(2.5rem, 5vw, 4rem);
      font-weight: 800;
      margin-bottom: 1rem;
      line-height: 1.1;
    }

    .tournament-subtitle {
      font-size: 1.2rem;
      color: var(--muted);
      margin-bottom: 2rem;
      line-height: 1.5;
    }

    .hero-actions {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #fff;
      padding: 1rem 2rem;
      border-radius: 8px;
      font-weight: 700;
      font-size: 1rem;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      border: none;
      cursor: pointer;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(255, 69, 0, 0.3);
    }

    /* --- ADD THESE NEW STYLES --- */
    .brand {
      font-weight: 700;
      font-size: 1.5rem;
    }
    .header-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    /* Tournament Details Section */
    .tournament-details {
      padding: 4rem 0;
    }

    .details-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 3rem;
      margin-top: 2rem;
    }

    .details-main, .info-card {
      background: var(--glass);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: var(--radius);
      padding: 2.5rem;
    }

    .details-sidebar {
      display: flex;
      flex-direction: column;
      gap: 2.5rem;
    }

    .info-card h3 {
      color: var(--accent);
    }
    
    .info-list { list-style: none; }
    .info-list li { display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
    .info-list li:last-child { border-bottom: none; }
    .info-label { color: var(--muted); }
    .info-value { font-weight: 600; }
    
    .finalists-table {
  background: var(--glass);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius);
  padding: 2rem;
  margin-top: 2rem;
}

.finalists-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 3rem;
}

.finalists-column {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.finalist-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  transition: all 0.3s ease;
}

.finalist-item:hover {
  background: rgba(255, 69, 0, 0.1);
}

.finalist-rank {
  font-weight: 700;
  color: var(--accent);
  min-width: 30px;
}

.finalist-team {
  font-weight: 600;
}

.empty-finalists {
  text-align: center;
  padding: 3rem 2rem;
  color: var(--muted);
  grid-column: span 2;
}

@media (max-width: 768px) {
  .finalists-grid {
    grid-template-columns: 1fr;
    gap: 2rem;
  }
  .empty-finalists {
    grid-column: span 1;
  }
}

    /* Schedule Section */
    .schedule-section { padding: 4rem 0; }
    .schedule-timeline { margin-top: 2rem; }
    .timeline-item { display: flex; gap: 2rem; padding: 1.5rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
    .timeline-item:last-child { border-bottom: none; }
    .timeline-date { min-width: 120px; text-align: center; }
    .timeline-day { font-size: 1.1rem; font-weight: 700; color: var(--accent); }
    .timeline-time { font-size: 0.85rem; color: var(--muted); }
    .timeline-content { flex: 1; }
    .timeline-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem; }
    .timeline-desc { color: var(--muted); }
    
    /* Section Headers */
    .section-header { text-align: center; margin-bottom: 2rem; }
    .section-title { font-size: clamp(2rem, 4vw, 3rem); font-weight: 800; margin-bottom: 1rem; }
    .section-subtitle { font-size: 1.1rem; color: var(--muted); max-width: 600px; margin: 0 auto; }

    /* NEW: FAQ Section */
    .faq-section {
        padding: 4rem 0;
    }
    .faq-grid {
        max-width: 800px;
        margin: 0 auto;
        text-align: left;
    }
    .faq-item {
        background: var(--glass);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: var(--radius);
        margin-bottom: 1rem;
    }
    .faq-question {
        width: 100%;
        background: none;
        border: none;
        padding: 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        color: var(--copy);
        font-size: 1.1rem;
        font-weight: 600;
        text-align: left;
    }
    .faq-question i {
        transition: transform 0.3s ease;
        color: var(--accent);
    }
    .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
    }
    .faq-answer p {
        color: var(--muted);
        padding: 0 1.5rem 1.5rem 1.5rem;
        margin: 0;
        line-height: 1.7;
    }
    .faq-item.active .faq-answer {
        max-height: 200px; /* Adjust as needed */
    }
    .faq-item.active .faq-question i {
        transform: rotate(45deg);
    }

    /* --- ADD STYLES FOR HAMBURGER & MOBILE NAV PANEL --- */
    .hamburger {
      display: none; /* Hidden by default */
      background: none;
      border: none;
      color: var(--copy);
      font-size: 1.5rem;
      cursor: pointer;
    }

    .mobile-nav {
      position: fixed;
      top: 0;
      right: -100%; /* Start off-screen */
      width: 300px;
      height: 100%;
      background: var(--panel);
      z-index: 2000;
      transition: right 0.4s cubic-bezier(0.25, 1, 0.5, 1);
      box-shadow: -10px 0 30px rgba(0,0,0,0.5);
      padding-top: 60px; /* Space for the header */
      display: flex;
      flex-direction: column;
    }

    .mobile-nav.is-open {
      right: 0; /* Slide in */
    }

    .mobile-nav .profile-header {
      padding: 1.5rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .mobile-nav .profile-photo {
      width: 50px;
      height: 50px;
      background: var(--accent);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: #fff;
    }
    
    .mobile-nav .profile-username {
      font-size: 1.1rem;
      font-weight: 600;
    }
    
    .mobile-nav .profile-actions {
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .mobile-nav .profile-action {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      color: var(--muted);
      transition: all 0.2s ease;
      background: none;
      border: none;
      cursor: pointer;
      width: 100%;
      text-align: left;
    }
    .mobile-nav .profile-action:hover {
      background: var(--glass);
      color: var(--copy);
    }
    
    .mobile-nav .guest-view {
      padding: 2rem;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      margin-top: 2rem;
    }
    
    .mobile-nav .guest-view i {
      font-size: 3rem;
      color: var(--accent);
    }
    
    .mobile-nav .guest-view p {
      color: var(--muted);
      line-height: 1.6;
    }


    /* Footer Styles */
    footer.site-footer {
      padding: 4rem 2rem 2rem;
      background: rgba(10, 10, 10, 0.5);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    .footer-grid {
      max-width: 1200px;
      margin: 0 auto 3rem auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2.5rem;
      text-align: left;
    }
    .footer-column h4 {
      color: var(--copy);
      margin-bottom: 1.5rem;
      font-size: 1.1rem;
      font-weight: 600;
    }
    .footer-column ul {
      list-style: none;
      padding: 0;
    }
    .footer-column ul a, .footer-column p {
      color: var(--muted);
      text-decoration: none;
      transition: color 0.3s ease;
      display: block;
      margin-bottom: 0.75rem;
      font-size: 0.95rem;
    }
    .footer-column ul a:hover {
        color: var(--accent);
    }
    .footer-brand .brand {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        font-weight: 700;
        color: var(--copy);
    }
    .footer-brand p {
      margin-bottom: 1.5rem;
      line-height: 1.7;
    }
    .social-links {
      display: flex;
      gap: 1.5rem;
      margin-top: 1rem;
    }
    .social-links a {
      color: var(--muted);
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }
    .social-links a:hover {
      color: var(--accent);
      transform: translateY(-2px);
    }
    .footer-bottom {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      padding-top: 2rem;
      text-align: center;
      color: var(--muted);
      font-size: 0.9rem;
    }
    
    /* Profile Dropdown Styles */
    .profile-dropdown { position: relative; display: flex; align-items: center; }
    .profile-icon { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; color: var(--copy); cursor: pointer; border-radius: 50%; transition: all 0.3s ease; font-size: 1.5rem; }
    .profile-icon:hover { color: var(--accent); background: rgba(255, 69, 0, 0.1); transform: scale(1.1); }
    .profile-modal { position: absolute; top: 100%; right: 0; background: var(--panel); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; min-width: 280px; opacity: 0; visibility: hidden; transform: translateY(-10px); transition: all 0.3s ease; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5); z-index: 1000; margin-top: 10px; }
    .profile-dropdown:hover .profile-modal { opacity: 1; visibility: visible; transform: translateY(0); }
    .profile-header { display: flex; align-items: center; gap: 1rem; padding: 1.5rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
    .profile-photo { width: 50px; height: 50px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #000; font-size: 1.5rem; flex-shrink: 0; }
    .profile-username { font-weight: 700; font-size: 1.1rem; }
    .profile-actions { padding: 0.5rem; }
    .profile-action { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; text-decoration: none; border-radius: 8px; transition: all 0.3s ease; font-weight: 600; width: 100%; border: none; background: none; cursor: pointer; font-family: inherit; }
    .profile-action:hover { background: rgba(255, 255, 255, 0.05); color: var(--accent); transform: translateX(4px); }
    .logout-action:hover { background: rgba(255, 0, 0, 0.1); color: #ff6b6b; }
    

    @media (max-width: 768px) {
      .details-grid { grid-template-columns: 1fr; }
      .hero-actions { flex-direction: column; }
      .btn-primary { text-align: center; }
      .timeline-item { flex-direction: column; gap: 1rem; }
      .timeline-date { text-align: left; }

      /* --- ADD THESE STYLES FOR MOBILE NAV --- */
      .nav-actions {
        display: none; /* Hide desktop nav items */
      }
      .hamburger {
        display: inline-flex; /* Show hamburger button */
      }
    }
    /* Large Desktop Screens (1600px and up) */
@media (min-width: 1600px) {
  :root {
    --container: 1400px; /* Increase max container width */
  }
  
  /* Tournament Hero Adjustments */
  .tournament-hero {
    height: 80vh; /* Increase hero height */
    min-height: 600px;
  }
  
  .tournament-hero .container {
    padding: 0 0 6rem 6rem; /* More breathing room */
  }
  
  .tournament-title {
    font-size: clamp(3.5rem, 6vw, 5rem); /* Larger title */
  }
  
  .tournament-subtitle {
    font-size: 1.4rem; /* Larger subtitle */
    max-width: 900px;
  }
  
  /* Details Grid - Make it 3 columns */
  .details-grid {
    grid-template-columns: 3fr 1fr 1fr; /* Main content + 2 sidebars */
    gap: 4rem;
  }
  
  .details-main, .info-card {
    padding: 3.5rem; /* More padding */
  }
  
  /* Typography scaling */
  .section-title {
    font-size: clamp(2.5rem, 5vw, 4rem);
  }
  
  .section-subtitle {
    font-size: 1.3rem;
    max-width: 800px;
  }
}

/* Ultra-wide screens (1920px and up) */
@media (min-width: 1920px) {
  :root {
    --container: 1600px; /* Even larger container */
  }
  
  /* Section spacing */
  .tournament-details,
  .schedule-section,
  .faq-section {
    padding: 6rem 0; /* More vertical spacing */
  }
  
  /* Finalists section improvements */
  .finalists-grid {
    grid-template-columns: 1fr 1fr 1fr 1fr; /* 4 columns for ultra-wide */
    gap: 2rem;
  }
  
  .finalists-column {
    gap: 1.5rem;
  }
  
  .finalist-item {
    padding: 1.5rem;
  }
  
  /* FAQ Section - 2 column layout */
  .faq-grid {
    max-width: 1200px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
  }
  
  /* Timeline improvements */
  .timeline-item {
    padding: 2rem 0;
  }
  
  .timeline-date {
    min-width: 150px;
  }
  
  .timeline-day {
    font-size: 1.3rem;
  }
  
  .timeline-title {
    font-size: 1.3rem;
  }
}

/* 4K and beyond (2560px+) */
@media (min-width: 2560px) {
  :root {
    --container: 2000px;
  }
  
  .tournament-hero {
    height: 85vh;
    min-height: 800px;
  }
  
  .details-grid {
    grid-template-columns: 4fr 1fr 1fr; /* Give even more space to main content */
    gap: 5rem;
  }
  
  .details-main, .info-card {
    padding: 4rem;
  }
  
  /* Font scaling for very large screens */
  .tournament-title {
    font-size: clamp(4rem, 7vw, 6rem);
  }
  
  .tournament-subtitle {
    font-size: 1.6rem;
  }
  
  .section-title {
    font-size: clamp(3rem, 6vw, 5rem);
  }
}
/* Improved finalists layout for larger screens */
@media (min-width: 1600px) {
  .empty-finalists {
    padding: 6rem 4rem;
    grid-column: span 4; /* Span all columns on ultra-wide */
  }
  
  .empty-finalists i {
    font-size: 4rem;
  }
}

/* Better prize distribution display */
@media (min-width: 1600px) {
  .info-list li {
    padding: 1rem 0;
  }
  
  .info-label, .info-value {
    font-size: 1.1rem;
  }
}

/* Enhanced button and interactive elements */
@media (min-width: 1600px) {
  .btn-primary {
    padding: 1.2rem 2.5rem;
    font-size: 1.1rem;
  }
  
  .faq-question {
    padding: 2rem;
    font-size: 1.2rem;
  }
  
  .faq-answer p {
    padding: 0 2rem 2rem 2rem;
    font-size: 1.1rem;
  }
}
@media (min-width: 1920px) {
  header.site-header {
    height: 90px; /* Even taller header */
    padding: 0 4rem; /* More horizontal padding */
  }
  
  .brand {
    font-size: 2rem; /* Larger brand text */
  }
}
  </style>
</head>

<body>
  <header class="site-header">
    <a href="index.html" class="brand">
      EArena
    </a>

    <div class="header-right">
      <div class="nav-actions">
        <div id="guest-menu">
          <button class="header-cta" onclick="redirectToAuth()">Join Us</button>
        </div>
        <div id="user-menu" style="display: none;">
          <div class="profile-dropdown">
            <div class="profile-icon" id="profile-icon">
              <i class="fas fa-user-circle"></i>
            </div>
            <div class="profile-modal" id="profile-modal">
              <div class="profile-header">
                <div class="profile-photo"><i class="fas fa-user"></i></div>
                <div class="profile-info">
                  <div class="profile-username" id="modal-username">User</div>
                </div>
              </div>
              <div class="profile-actions">
                <a href="user-dashboard.html" class="profile-action" id="modal-dashboard-link">
                  <i class="fas fa-user"></i>
                  <span>My Account</span>
                </a>
                <button class="profile-action logout-action" onclick="logout()">
                  <i class="fas fa-sign-out-alt"></i>
                  <span>Logout</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <button class="hamburger" aria-label="Toggle menu" aria-expanded="false">
        <i class="fas fa-bars"></i>
      </button>
    </div>
  </header>

  <div id="mobile-nav" class="mobile-nav">
    </div>

  <main>
    <section class="tournament-hero">
      <div class="container">
        <div class="hero-content">
          <h1 class="tournament-title" id="tournament-title">Loading Tournament...</h1>
          <p class="tournament-subtitle" id="tournament-subtitle">
            Loading tournament details...
          </p>
          <div class="hero-actions" id="hero-actions">
            <button class="btn-primary" id="primary-action">
              <i class="fas fa-user-plus"></i>
              Register Now
            </button>
          </div>
        </div>
      </div>
    </section>

    <section class="tournament-details" id="tournament-details-section">
      <div class="container">
        <div class="details-grid">
          <div class="details-main">
            <h2 style="color: var(--accent); margin-bottom: 1.5rem;">Tournament Overview</h2>
            <div id="tournament-overview">
              <p style="color: var(--muted);">Loading details...</p>
            </div>
            <h3 style="color: var(--accent); margin: 2rem 0 1rem 0;">Tournament Format</h3>
            <div id="tournament-format-details">
              <p style="color: var(--muted);">Loading format...</p>
            </div>
          </div>

          <div class="details-sidebar">
            <div class="info-card">
              <h3><i class="fas fa-info-circle"></i> Tournament Info</h3>
              <ul class="info-list">
                <li><span class="info-label">Game</span><span class="info-value" id="game-name">--</span></li>
                <li><span class="info-label">Format</span><span class="info-value" id="tournament-format">--</span></li>
                <li><span class="info-label">Entry Fee</span><span class="info-value" id="entry-fee">--</span></li>
                <li><span class="info-label">Max Teams</span><span class="info-value" id="max-teams">--</span></li>
              </ul>
            </div>
            <div class="info-card">
              <h3><i class="fas fa-calendar"></i> Schedule</h3>
              <ul class="info-list">
                <li><span class="info-label">Reg. Opens</span><span class="info-value" id="reg-start-date">--</span></li>
                <li><span class="info-label">Reg. Closes</span><span class="info-value" id="reg-end-date">--</span></li>
                <li><span class="info-label">Tournament Start</span><span class="info-value" id="tournament-start-date">--</span></li>
                <li><span class="info-label">Tournament End</span><span class="info-value" id="tournament-end-date">--</span></li>
              </ul>
            </div>
            <div class="info-card">
              <h3><i class="fas fa-trophy"></i> Prizes</h3>
              <ul class="info-list" id="prize-list"></ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="leaderboard-section" id="finalists-section" style="display: none;">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title">Finalists</h2>
          <p class="section-subtitle">Top 16 teams competing in the final rounds.</p>
        </div>
        <div class="finalists-table" id="finalists-table">
          <div id="finalists-content">
            <!-- Content populated by JS -->
          </div>
        </div>
      </div>
    </section>

    <section class="schedule-section">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title">Tournament Schedule</h2>
          <p class="section-subtitle">Complete timeline of matches and events.</p>
        </div>
        <div class="schedule-timeline" id="schedule-timeline"></div>
      </div>
    </section>

    <!-- NEW: FAQ Section -->
    <section class="faq-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Frequently Asked Questions</h2>
            </div>
            <div class="faq-grid">
                <div class="faq-item">
                    <button class="faq-question">
                        <span>What do I need to get started?</span>
                        <i class="fas fa-plus"></i>
                    </button>
                    <div class="faq-answer">
                        <p>All you need is an account and the game you want to compete in! Check the specific tournament rules for any additional requirements, but generally, it's that simple to start your competitive journey.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>How are prizes awarded?</span>
                        <i class="fas fa-plus"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Prizes are typically awarded within 7-14 business days after a tournament concludes and results are verified. Winnings are sent via the payment method you have on file in your user account.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">
                        <span>What is the fair play policy?</span>
                        <i class="fas fa-plus"></i>
                    </button>
                    <div class="faq-answer">
                        <p>We have a zero-tolerance policy for cheating, hacking, or any form of unsportsmanlike conduct. All players must adhere to our code of conduct, and we use advanced anti-cheat software to ensure a fair playing field.</p>
                    </div>
                </div>
                 <div class="faq-item">
                    <button class="faq-question">
                        <span>Can I stream my matches?</span>
                        <i class="fas fa-plus"></i>
                    </button>
                    <div class="faq-answer">
                        <p>Absolutely! We encourage players to stream their matches. Just be sure to check the specific tournament rules, as some events may have restrictions or require a stream delay.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-column footer-brand">
          <a href="index.html" class="brand">EArena</a>
          <p>The ultimate destination for competitive gaming.</p>
           <div class="social-links">
              <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
              <a href="#" aria-label="Discord"><i class="fab fa-discord"></i></a>
              <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
              <a href="#" aria-label="Youtube"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
        <div class="footer-column">
          <h4>Tournaments</h4>
          <ul>
            <li><a href="#">Browse All</a></li>
            <li><a href="#">Live Matches</a></li>
            <li><a href="#">Upcoming</a></li>
            <li><a href="#">Past Results</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Community</h4>
          <ul>
            <li><a href="#">Discord</a></li>
            <li><a href="#">Forums</a></li>
            <li><a href="#">Support</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Company</h4>
          <ul>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 EArena. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    const API_BASE_URL = 'https://t2-237c.onrender.com';
    let currentTournament = null;

    async function getTournamentData(tournamentSlug) {
      try {
        const response = await fetch(`${API_BASE_URL}/api/tournaments/slug/${tournamentSlug}`);
        if (!response.ok) throw new Error(`API Error: ${response.status}`);
        const result = await response.json();
        if (result.success) return result.data;
        throw new Error(result.error || 'Failed to fetch tournament');
      } catch (error) {
        console.error('Error fetching tournament data:', error);
        document.getElementById('tournament-title').textContent = "Tournament Not Found";
        document.getElementById('tournament-subtitle').textContent = "The requested tournament could not be loaded.";
        document.getElementById('primary-action').style.display = 'none';
        return null;
      }
    }

    function updateSchedule(tournament) {
        const container = document.getElementById('schedule-timeline');
        if (!container) return;
        let allEvents = [];

        // Helper to safely create a Date object
        const parseDate = (dateStr) => {
            const date = new Date(dateStr);
            return isNaN(date) ? null : date;
        };

        const addEvent = (date, title, description = '') => {
            if (date) allEvents.push({ date, title, description });
        };
        
        addEvent(parseDate(tournament.registrationStart), 'Registration Opens');
        addEvent(parseDate(tournament.registrationEnd), 'Registration Closes');
        addEvent(parseDate(tournament.tournamentStart), 'Tournament Begins');
        addEvent(parseDate(tournament.tournamentEnd), 'Tournament Ends');

        if (tournament.scheduleEvents) {
            tournament.scheduleEvents.forEach(event => {
                // Combine date and time correctly for the Date constructor
                const eventDate = parseDate(`${event.date}T${event.time}Z`); // Append 'Z' for UTC
                addEvent(eventDate, event.title, event.description);
            });
        }
        if (tournament.format === 'kp' && tournament.kpSettings && tournament.kpSettings.matchSchedule) {
            tournament.kpSettings.matchSchedule.forEach(match => {
                const matchDate = parseDate(match.date);
                addEvent(matchDate, match.match, `${match.teams} teams competing`);
            });
        }

        allEvents.sort((a, b) => a.date - b.date);

        if (allEvents.length <= 4 && !tournament.scheduleEvents && !(tournament.kpSettings && tournament.kpSettings.matchSchedule)) {
             container.innerHTML = `<div class="empty-schedule" style="text-align:center; padding: 2rem;"><p>No detailed match schedule has been posted yet.</p></div>`;
             return;
        }
        
        container.innerHTML = allEvents.map(event => {
            const day = event.date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', timeZone: 'UTC' });
            const time = event.date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true, timeZone: 'UTC' });
            return `
                <div class="timeline-item">
                    <div class="timeline-date"><div class="timeline-day">${day}</div><div class="timeline-time">${time}</div></div>
                    <div class="timeline-content">
                        <h3 class="timeline-title">${event.title}</h3>
                        <p class="timeline-desc">${event.description || ''}</p>
                    </div>
                </div>
            `;
        }).join('');
    }

    function renderFinalists(finalists) {
      const finalistsContent = document.getElementById('finalists-content');
      
      if (!finalists || finalists.length === 0) {
          finalistsContent.innerHTML = `
              <div class="empty-finalists">
                  <i class="fas fa-trophy" style="font-size: 3rem; color: var(--accent); margin-bottom: 1rem;"></i>
                  <p>The list of the top 16 will appear here.</p>
              </div>
          `;
          return;
      }

      const leftColumn = finalists.slice(0, 8);
      const rightColumn = finalists.slice(8, 16);

      finalistsContent.innerHTML = `
          <div class="finalists-grid">
              <div class="finalists-column">
                  ${leftColumn.map((team, index) => `
                      <div class="finalist-item">
                          <div class="finalist-rank">${index + 1}.</div>
                          <div class="finalist-team">${team.teamName || team.name || `Team ${index + 1}`}</div>
                      </div>
                  `).join('')}
              </div>
              <div class="finalists-column">
                  ${rightColumn.map((team, index) => `
                      <div class="finalist-item">
                          <div class="finalist-rank">${index + 9}.</div>
                          <div class="finalist-team">${team.teamName || team.name || `Team ${index + 9}`}</div>
                      </div>
                  `).join('')}
              </div>
          </div>
      `;
  }

    function updateUI(tournament) {
        if (!tournament) return;

       // REPLACE WITH THIS SECTION
        // --- NEW, SMARTER IMAGE HANDLING ---
        const heroSection = document.querySelector('.tournament-hero');
        if (tournament.posterImage) {
            let imageUrl;
            if (tournament.posterImage.startsWith('http')) {
                // It's already a full URL (from Cloudinary), use it directly.
                imageUrl = tournament.posterImage;
            } else {
                // It's a relative path. Use the URL constructor for a safe join.
                imageUrl = new URL(tournament.posterImage, API_BASE_URL).href;
            }
            heroSection.style.backgroundImage = `url('${imageUrl}')`;
        }
        // --- END OF NEW LOGIC ---

        document.getElementById('page-title').textContent = `${tournament.title} | EArena`;
        document.getElementById('tournament-title').textContent = tournament.title;
        document.getElementById('tournament-subtitle').textContent = tournament.description || 'Join this exciting tournament!';
        
        const overviewContainer = document.getElementById('tournament-overview');
        overviewContainer.innerHTML = `<p>${tournament.description || "No description available."}</p>`;
        
        const formatContainer = document.getElementById('tournament-format-details');
        let formatHTML = '';
        if (tournament.format === 'kp' && tournament.kpSettings) {
            const settings = tournament.kpSettings;
            formatHTML = `
                <p style="margin-bottom: 1rem; line-height: 1.7;">This tournament follows the <strong>Kill Points (KP)</strong> format.</p>
                <ul style="list-style-type: none; padding-left: 0; display: flex; flex-direction: column; gap: 1rem;">
                    <li style="display: flex; align-items: start; gap: 0.75rem;"><i class="fas fa-sitemap" style="color: var(--accent); margin-top: 5px;"></i><div><strong>Structure:</strong> ${settings.numberOfGroups || 'multiple'} qualifier groups.</div></li>
                    <li style="display: flex; align-items: start; gap: 0.75rem;"><i class="fas fa-users" style="color: var(--accent); margin-top: 5px;"></i><div><strong>Groups:</strong> ${settings.groupSize || 'several'} teams per group.</div></li>
                    <li style="display: flex; align-items: start; gap: 0.75rem;"><i class="fas fa-trophy" style="color: var(--accent); margin-top: 5px;"></i><div><strong>Advancement:</strong> Top <strong>${settings.qualifiersPerGroup || 'few'} teams</strong> advance.</div></li>
                </ul>
            `;
        } else {
            formatHTML = `<p>This tournament features a <strong>${tournament.format ? tournament.format.replace('_', ' ') : 'Standard'}</strong> format.</p>`;
        }
        formatContainer.innerHTML = formatHTML;

        document.getElementById('game-name').textContent = tournament.game || 'TBD';
        document.getElementById('tournament-format').textContent = tournament.format || 'TBD';
        document.getElementById('entry-fee').textContent = tournament.entryFee ? `₹${tournament.entryFee}` : 'Free';
        document.getElementById('max-teams').textContent = tournament.maxTeams || 'Unlimited';

        const formatDate = (dateString) => new Date(dateString).toLocaleDateString('en-IN', { day: 'numeric', month: 'short' });
        document.getElementById('reg-start-date').textContent = formatDate(tournament.registrationStart);
        document.getElementById('reg-end-date').textContent = formatDate(tournament.registrationEnd);
        document.getElementById('tournament-start-date').textContent = formatDate(tournament.tournamentStart);
        document.getElementById('tournament-end-date').textContent = formatDate(tournament.tournamentEnd);

        const prizeList = document.getElementById('prize-list');
        prizeList.innerHTML = '';
        if (tournament.prizeDistribution) {
            Object.entries(tournament.prizeDistribution).forEach(([place, amount]) => {
                prizeList.innerHTML += `<li><span class="info-label">${place.charAt(0).toUpperCase() + place.slice(1)} Place</span><span class="info-value">₹${amount.toLocaleString('en-IN')}</span></li>`;
            });
        }
        
        updateStatusAndLeaderboard(tournament);
        updateSchedule(tournament);
    }
    
    function updateStatusAndLeaderboard(tournament) {
      const status = tournament.status;
      const primaryActionBtn = document.getElementById('primary-action');
      const finalistsSection = document.getElementById('finalists-section'); // Changed variable name

      finalistsSection.style.display = 'none';
      primaryActionBtn.style.display = 'flex';
      primaryActionBtn.disabled = false;

      switch(status) {
          case 'upcoming':
              primaryActionBtn.innerHTML = '<i class="fas fa-clock"></i> Registration opens soon';
              primaryActionBtn.disabled = true;
              break;
          case 'registration_open':
              primaryActionBtn.innerHTML = '<i class="fas fa-user-plus"></i> Register Now';
              primaryActionBtn.onclick = () => {
                  const sessionData = getSessionData();
                  if (sessionData && sessionData.data.user) {
                      window.location.href = `team-registration.html?slug=${currentTournament.slug}`;
                  } else {
                      redirectToAuth('register');
                  }
              };
              break;
          case 'registration_closed':
              primaryActionBtn.innerHTML = '<i class="fas fa-lock"></i> Registration Closed';
              primaryActionBtn.disabled = true;
              break;
          case 'ongoing':
          case 'ended':
              finalistsSection.style.display = 'block';
              primaryActionBtn.innerHTML = '<i class="fas fa-lock"></i> Tournament Ended';
              renderFinalists(tournament.finalists || []); // Changed to use finalists data
              break;
          default:
              primaryActionBtn.innerHTML = '<i class="fas fa-info-circle"></i> View Details';
              primaryActionBtn.disabled = true;
              break;
      }
    }


    document.addEventListener('DOMContentLoaded', async () => {
      // --- PAGE-SPECIFIC LOGIC ---
      const urlParams = new URLSearchParams(window.location.search);
      const slug = urlParams.get('slug');
      
      if (!slug) {
        document.getElementById('tournament-title').textContent = "Tournament Not Found";
        document.getElementById('tournament-subtitle').textContent = "Please provide a valid tournament URL.";
        return;
      }
      
      currentTournament = await getTournamentData(slug);
      if (currentTournament) {
        updateUI(currentTournament);
      }
      
      // FAQ Accordion Logic
      const faqItems = document.querySelectorAll('.faq-item');
      faqItems.forEach(item => {
          const question = item.querySelector('.faq-question');
          question.addEventListener('click', () => {
              const currentlyActive = document.querySelector('.faq-item.active');
              if (currentlyActive && currentlyActive !== item) {
                  currentlyActive.classList.remove('active');
              }
              item.classList.toggle('active');
          });
      });
    });

  </script>
  <script src="navbar.js"></script>
</body>

</html>

