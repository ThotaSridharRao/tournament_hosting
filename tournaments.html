<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tournaments - Uni Games</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="icon" type="image/png" href="ug.png">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

  <style>
    /* =========================
       NAVBAR STYLES (Modern Design)
       ========================= */
    .nav-normal {
      background: rgba(13, 10, 26, 0.1);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      padding: 0.5rem 2rem;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      transition: transform 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
      transform: translateY(0);
    }

    .nav-normal.nav-hidden {
      transform: translateY(-100%);
    }

    .nav-normal.nav-scrolled {
      background: rgba(13, 10, 26, 0.3);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1400px;
      margin: 0 auto;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: white;
      text-decoration: none;
      letter-spacing: -0.5px;
      display: flex;
      align-items: center;
    }

    .logo img {
      height: 80px;
      width: auto;
      margin: 0;
      padding: 0;
      display: block;
    }

    .nav-center {
      display: flex;
      align-items: center;
      gap: 2.5rem;
    }

    .nav-links {
      display: flex;
      gap: 0;
      list-style: none;
      align-items: center;
      margin: 0;
      padding: 0;
    }

    .nav-links li {
      position: relative;
    }

    .nav-links a {
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      padding: 0.6rem 1.2rem;
      display: block;
    }

    .nav-links a:hover {
      color: white;
    }

    .auth-buttons {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .btn {
      padding: 0.65rem 1.5rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      font-size: 0.9rem;
    }

    .btn-request {
      background: white;
      color: #0a0a0a;
    }

    .btn-request:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(255, 255, 255, 0.3);
    }

    .btn-logout {
      background: rgba(239, 68, 68, 0.15);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .btn-logout:hover {
      background: rgba(239, 68, 68, 0.25);
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.5rem 1rem;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 50px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-secondary) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.85rem;
    }

    .user-name {
      font-weight: 500;
      font-size: 0.9rem;
    }

    .menu-toggle {
      display: none;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.5rem;
    }

    .menu-icon {
      width: 24px;
      height: 20px;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .menu-icon span {
      width: 100%;
      height: 2px;
      background: white;
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    .menu-toggle.active .menu-icon span:nth-child(1) {
      transform: rotate(45deg) translate(7px, 7px);
    }

    .menu-toggle.active .menu-icon span:nth-child(2) {
      opacity: 0;
    }

    .menu-toggle.active .menu-icon span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }

    /* Mobile Styles */
    @media (max-width: 968px) {
      .menu-toggle {
        display: block;
      }

      .nav-center {
        position: fixed;
        top: 0;
        right: -100%;
        height: 100vh;
        width: 85%;
        max-width: 350px;
        flex-direction: column;
        background: rgba(15, 15, 15, 0.98);
        backdrop-filter: blur(20px);
        padding: 6rem 2rem 2rem;
        gap: 0;
        transition: right 0.3s ease;
        border-left: 1px solid rgba(255, 255, 255, 0.1);
        align-items: flex-start;
        overflow-y: auto;
      }

      .nav-center.active {
        right: 0;
      }

      .nav-links {
        flex-direction: column;
        width: 100%;
        gap: 0;
      }

      .nav-links li {
        width: 100%;
      }

      .nav-links a {
        padding: 1rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      .auth-buttons {
        flex-direction: column;
        width: 100%;
        gap: 1rem;
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }

      .btn {
        width: 100%;
        text-align: center;
      }

      .user-info {
        width: 100%;
        justify-content: center;
      }

      #user-menu {
        display: flex;
        flex-direction: column;
        width: 100%;
        gap: 1rem;
      }
    }

    /* =========================
       Theme variables (Cyberpunk) - Matching index.html
       ========================= */
    :root {
      --primary-color: #0AFAD9;
      /* Electric Cyan */
      --bg-dark: #0D0A1A;
      /* Dark Matter Black */
      --accent-secondary: #5D3FD3;
      /* Deep Indigo */
      --panel: #161329;
      /* Dark Indigo Panel */
      --text-primary: #F0F0F0;
      /* Starlight White */
      --text-secondary: rgba(240, 240, 240, 0.7);
      --border-color: rgba(10, 250, 217, 0.2);
      --ease: 0.3s ease;

      /* Legacy variables for compatibility */
      --copy: var(--text-primary);
      --muted: var(--text-secondary);
      --accent: var(--accent-secondary);
      /* Using Indigo as main accent */
      --accent-2: var(--primary-color);
      /* Using Cyan as secondary accent */
      --radius: 12px;
      --container: 1400px;

      /* Additional colors */
      --success-color: #28a745;
      --warning-color: #ffc107;
      --danger-color: #dc3545;
      --info-color: #17a2b8;

      /* Enhanced easing curves */
      --ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);
      --ease-in-out-quart: cubic-bezier(0.76, 0, 0.24, 1);
      --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    body {
      margin: 0;
      font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      line-height: 1.6;
      min-height: 100vh;
    }

    .tournaments-container {
      background: var(--panel);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      margin: 20px auto;
      max-width: 1400px;
      overflow: hidden;
      border: 1px solid var(--border-color);
    }

    .tournaments-header {
      background: linear-gradient(135deg, var(--primary-color), #8e44ad);
      color: white;
      padding: 2rem;
      text-align: center;
    }

    .filters-section {
      background: var(--bg-dark);
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    /* Tournament Card Styles - Matching index.html */
    .tournament-card {
      background: var(--panel);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      border: 1px solid var(--border-color);
      text-decoration: none;
      color: var(--text-primary);
      display: flex;
      flex-direction: column;
      margin-bottom: 1.5rem;
      position: relative;
    }

    .tournament-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      border-color: var(--primary-color);
    }

    .tournament-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }

    .tournament-content {
      padding: 1.5rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .tournament-card h3 {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1rem;
      line-height: 1.4;
      color: var(--text-primary);
    }

    .tournament-card p {
      color: var(--text-secondary);
      font-size: 0.9rem;
      line-height: 1.5;
    }

    /* Tournament Status Badge */
    .tournament-status-badge {
      position: absolute;
      top: 1rem;
      right: 1rem;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      z-index: 2;
    }

    .status-live {
      background: linear-gradient(135deg, #ff4757, #ff3742);
      color: white;
    }

    .status-upcoming {
      background: linear-gradient(135deg, var(--primary-color), #00d2ff);
      color: var(--bg-dark);
    }

    .status-registration {
      background: linear-gradient(135deg, #2ed573, #7bed9f);
      color: var(--bg-dark);
    }

    .status-completed {
      background: linear-gradient(135deg, #5f27cd, #341f97);
      color: white;
    }

    .container {
      width: min(94%, var(--container));
      margin: 0 auto;
    }

    /* Main content */
    main {
      margin-top: 60px;
      min-height: calc(100vh - 60px);
    }

    /* Active navigation link */
    .nav-links a.active {
      color: var(--primary-color);
      font-weight: 700;
    }

    /* Page Header */
    .page-header {
      padding: 4rem 0 2rem;
      text-align: center;
    }

    .page-title {
      font-size: clamp(2.5rem, 5vw, 4rem);
      font-weight: 800;
      margin-bottom: 1rem;
      line-height: 1.1;
    }

    .page-subtitle {
      font-size: 1.2rem;
      color: var(--muted);
      max-width: 600px;
      margin: 0 auto 2rem;
      line-height: 1.5;
    }

    /* Filters */
    .filters-section {
      padding: 2rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      z-index: 10;
    }

    .filters {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
      justify-content: center;
      padding: 2px 1rem 0 1rem;
      /* Added 2px top padding to prevent hover cut-off */
      position: relative;
      z-index: 11;
    }

    /* Search Bar Styles */
    .search-container {
      margin-bottom: 2.3125rem;
      /* 2rem + 5px = 37px total */
      display: flex;
      justify-content: center;
      position: relative;
      z-index: 5;
      background: transparent;
    }

    .search-wrapper {
      position: relative;
      max-width: 400px;
      width: 100%;
    }

    #tournament-search {
      width: 100%;
      padding: 0.75rem 1rem 0.75rem 2.5rem;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 25px;
      color: var(--copy);
      font-size: 1rem;
      outline: none;
      transition: all 0.3s ease;
      box-sizing: border-box;
    }

    #tournament-search:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(10, 250, 217, 0.2);
      background: rgba(255, 255, 255, 0.15);
    }

    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
      pointer-events: none;
      z-index: 6;
    }

    .filter-btn {
      padding: 0.6rem 1.2rem;
      background: transparent;
      border: 2px solid var(--border-color);
      border-radius: 25px;
      color: var(--text-secondary);
      font-weight: 500;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .filter-btn:hover {
      border-color: var(--primary-color);
      color: var(--primary-color);
      transform: translateY(-2px);
    }

    .filter-btn.active {
      background: var(--primary-color);
      border-color: var(--primary-color);
      color: var(--bg-dark);
      font-weight: 600;
    }

    /* Tournaments Grid */
    .tournaments-section {
      padding: 4rem 0;
    }

    .tournaments-grid {
      display: grid;
      gap: 2rem;
      margin: 2rem auto 0;
      justify-content: center;
      max-width: 1400px;
      padding: 0 1rem;
      grid-template-columns: repeat(auto-fit, minmax(350px, 400px));
    }

    /* Single card: centered with constrained width */
    .tournaments-grid.single-card {
      grid-template-columns: minmax(350px, 500px);
      max-width: 500px;
    }

    /* Two cards: side by side */
    .tournaments-grid.two-cards {
      grid-template-columns: repeat(2, minmax(350px, 450px));
      max-width: 950px;
    }

    /* Multiple cards: responsive grid */
    .tournaments-grid.multi-cards {
      grid-template-columns: repeat(auto-fit, minmax(350px, 400px));
      max-width: 1400px;
    }

    .tournament-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.3s var(--ease-out-quart);
      border: 1px solid rgba(255, 255, 255, 0.1);
      max-width: 500px;
      /* Prevent cards from getting too wide */
      width: 100%;
    }

    .tournament-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 215, 0, 0.2);
    }

    .tournament-image {
      height: 200px;
      min-height: 200px;
      max-height: 200px;
      background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
      background-size: cover;
      background-position: center;
      position: relative;
      overflow: hidden;
    }

    .tournament-badge {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 215, 0, 0.9);
      color: #000;
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
    }

    .tournament-content {
      padding: 1.5rem;
    }

    .tournament-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      line-height: 1.2;
    }

    .tournament-description {
      color: var(--muted);
      font-size: 0.9rem;
      line-height: 1.4;
      margin-bottom: 1rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .tournament-stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--accent);
      display: block;
    }

    .stat-label {
      font-size: 0.75rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .tournament-actions {
      display: flex;
      gap: 0.75rem;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #06110a;
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s var(--ease-out-back);
      border: none;
      cursor: pointer;
      flex: 1;
      text-align: center;
      text-decoration: none;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: var(--copy);
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      font-weight: 500;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
      flex: 1;
      text-align: center;
      text-decoration: none;
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 215, 0, 0.3);
    }

    .btn-success {
      background: linear-gradient(135deg, #28a745, #20c997) !important;
      color: white !important;
      cursor: default !important;
    }

    .btn-success:hover {
      transform: none !important;
      box-shadow: none !important;
    }

    /* Loading State */
    .loading {
      text-align: center;
      padding: 4rem 0;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255, 215, 0, 0.3);
      border-top: 3px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* Footer Styles */
    footer.site-footer {
      background: #070707;  /* Changed from var(--panel) to black */
      padding: 5rem 2rem 2rem;
      text-align: center;
      border-top: 1px solid var(--border-color);
    }

    .footer-grid {
      max-width: 1200px;
      margin: 0 auto 3rem auto;
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;  /* First column wider for brand */
      gap: 3rem;
      text-align: left;
    }

    .footer-column h4 {
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      font-size: 1.2rem;
      font-weight: 700;
    }

    .footer-column ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .footer-column ul a,
    .footer-column p {
      color: var(--text-secondary);
      text-decoration: none;
      transition: all 0.3s ease;
      display: block;
      margin-bottom: 0.75rem;
      font-size: 1rem;
}

    .footer-column ul li {
      margin-bottom: 0.5rem;
    }

    .footer-column ul a:hover {
      color: var(--primary-color);
    }

    .footer-brand .brand {
      font-size: 2rem;
      margin-bottom: 1rem;
      color: var(--text-primary);
      text-decoration: none;
    }

    .footer-brand p {
      margin-bottom: 1.5rem;
      line-height: 1.7;
      color: var(--text-secondary);
    }

    .social-links {
      display: flex;
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .social-links a {
      color: var(--text-secondary);
      font-size: 1.5rem;
      transition: all 0.3s ease;
    }

    .social-links a:hover {
      color: var(--primary-color);
      transform: translateY(-3px);
    }

    .footer-bottom {
      border-top: 1px solid var(--border-color);
      padding-top: 2rem;
      opacity: 0.7;
      font-size: 1rem;
    }
    @media (max-width: 768px) {
      .footer-grid {
        grid-template-columns: 1fr;
        text-align: left;
        gap: 2rem;
      }

      /* Hide the Tournaments, Community, and Company columns on mobile */
      .footer-column:not(.footer-brand) {
        display: none;
      }

      .social-links {
        justify-content: flex-start;
      }
      
      .footer-brand .brand {
        justify-content: flex-start;
      }
    }
    /* Responsive */
    @media (max-width: 768px) {
      .tournaments-grid,
      .tournaments-grid.single-card,
      .tournaments-grid.two-cards,
      .tournaments-grid.multi-cards {
        grid-template-columns: 1fr;
        gap: 1.5rem;
        max-width: 500px;
        padding: 0 1rem;
      }

      .filters {
        justify-content: flex-start;
        overflow-x: auto;
        padding: 2px 1rem 0.5rem 1rem;
        /* Added 2px top padding for hover effect */
        scrollbar-width: none;
        -ms-overflow-style: none;
        gap: 0.5rem;
      }

      .filters::-webkit-scrollbar {
        display: none;
      }

      .filter-btn {
        white-space: nowrap;
        flex-shrink: 0;
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
      }

      .tournaments-grid,
      .tournaments-grid.single-card,
      .tournaments-grid.two-cards,
      .tournaments-grid.multi-cards {
        grid-template-columns: 1fr;
        gap: 1rem;
        padding: 0 1rem;
        max-width: 100%;
      }

      .page-header {
        padding: 2rem 1rem 1rem;
      }

      .page-title {
        font-size: 2rem;
      }

      .tournament-actions {
        flex-direction: column;
      }

      .page-title {
        font-size: clamp(2rem, 8vw, 3rem);
      }

      .page-subtitle {
        font-size: 1rem;
        padding: 0 1rem;
      }

      /* Search bar responsive improvements */
      .search-container {
        padding: 0 1rem;
        margin-bottom: 1.8125rem;
        /* 1.5rem + 5px = 29px total */
      }

      .search-wrapper {
        max-width: 100%;
      }

      #tournament-search {
        font-size: 16px !important;
        /* Prevents zoom on iOS */
        padding: 0.875rem 1rem 0.875rem 2.75rem;
      }

      .search-icon {
        left: 1.125rem;
      }
    }

    @media (max-width: 480px) {
      .tournament-stats {
        flex-direction: column;
        gap: 0.75rem;
      }

      .stat {
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-align: left;
      }

      .stat-value {
        font-size: 1rem;
      }

      .stat-label {
        font-size: 0.8rem;
      }

      /* Mobile search bar adjustments */
      .search-container {
        margin-bottom: 1.3125rem;
        /* 1rem + 5px = 21px total */
      }

      #tournament-search {
        padding: 1rem 1rem 1rem 3rem;
        font-size: 16px !important;
        border-radius: 30px;
      }

      .search-icon {
        left: 1.25rem;
        font-size: 1.1rem;
      }

      .filters-section {
        padding: 1.5rem 0;
      }

      .filters {
        padding: 2px 0.5rem 0.5rem 0.5rem;
        /* Added 2px top padding for hover effect */
        gap: 0.4rem;
      }

      .filter-btn {
        padding: 0.6rem 1rem;
        font-size: 0.8rem;
        border-radius: 20px;
      }
    }



    #user-menu {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    /* Custom Scrollbar Design */
    .scrollbar {
      margin-left: 30px;
      float: left;
      height: 300px;
      width: 65px;
      background: var(--panel);
      overflow-y: scroll;
      margin-bottom: 25px;
    }

    .force-overflow {
      min-height: 450px;
    }

    /* Custom Scrollbar Styles */
    ::-webkit-scrollbar-track {
      border: 1px solid var(--border-color);
      background-color: var(--bg-dark);
    }

    ::-webkit-scrollbar {
      width: 10px;
      background-color: var(--bg-dark);
    }

    ::-webkit-scrollbar-thumb {
      background-color: var(--panel);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background-color: var(--accent-secondary);
    }

    /* Firefox scrollbar */
    * {
      scrollbar-width: thin;
      scrollbar-color: var(--panel) var(--bg-dark);
    }

    /* Social sharing buttons */
    .share-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      background: rgba(255, 255, 255, 0.1);
      color: var(--muted);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .share-btn:hover {
      background: rgba(255, 215, 0, 0.2);
      color: var(--accent);
      transform: translateY(-2px);
    }

    .share-btn:active {
      transform: translateY(0);
    }

    /* =========================
       Rules Section
       ========================= */
    .rules-section {
      padding: 5rem 2rem;
      background: var(--bg-dark);
    }

    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .section-title {
      font-size: clamp(2.2rem, 5vw, 3.5rem);
      margin-bottom: 1rem;
      font-weight: 800;
      color: var(--text-primary);
    }

    .section-subtitle {
      color: var(--text-secondary);
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .rules-content {
      max-width: 1000px;
      margin: 0 auto;
    }

    /* =========================
       FAQ Section
       ========================= */
    .faq-section {
      padding: 5rem 2rem;
      text-align: center;
      background: var(--panel);
    }

    .faq-title {
      font-size: clamp(2.2rem, 5vw, 3.5rem);
      margin-bottom: 4rem;
      font-weight: 800;
    }

    .faq-grid {
      max-width: 800px;
      margin: 0 auto;
      text-align: left;
    }

    .faq-item {
      background: var(--bg-dark);
      border-radius: 8px;
      margin-bottom: 1rem;
      border: 1px solid var(--border-color);
      transition: border-color 0.3s ease, transform 0.3s ease;
    }

    .faq-item:hover {
      border-color: var(--primary-color);
    }

    .faq-question {
      width: 100%;
      background: none;
      border: none;
      padding: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      color: var(--text-primary);
      font-size: 1.1rem;
      font-weight: 600;
      transition: color 0.3s ease;
    }

    .faq-question:hover {
      color: var(--primary-color);
    }

    .faq-question i {
      transition: transform 0.3s ease;
      color: var(--primary-color);
    }

    .faq-answer {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
    }

    .faq-answer p {
      color: var(--text-secondary);
      padding: 0 1.5rem 1.5rem 1.5rem;
      margin: 0;
      line-height: 1.6;
    }

    .faq-item.active .faq-answer {
      max-height: 200px;
    }

    .faq-item.active .faq-question i {
      transform: rotate(45deg);
    }
  </style>
</head>

<body>
  <nav class="nav-normal">
    <div class="nav-container">
      <a href="index.html" class="logo">
        <img src="ug.png" alt="Uni Games">
      </a>
      <div class="nav-center" id="normalNav">
        <ul class="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="#rules">Rules</a></li>
          <li><a href="#faq">FAQ</a></li>
        </ul>
        <div class="auth-buttons" id="normalAuth">
          <div id="guest-menu">
            <a href="auth.html" class="btn btn-request">Join Us</a>
          </div>
          <div id="user-menu" style="display: none;">
            <div class="user-info">
              <div class="user-avatar" id="user-avatar">U</div>
              <span class="user-name" id="navbar-username">User</span>
            </div>
            <button class="btn btn-logout" onclick="handleLogout()">Logout</button>
          </div>
        </div>
      </div>
      <button class="menu-toggle" id="normalMenuToggle">
        <div class="menu-icon">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </button>
    </div>
  </nav>

  <main>
    <!-- Page Header -->
    <section class="page-header">
      <div class="container">
        <h1 class="page-title">Browse All Tournaments</h1>
        <p class="page-subtitle">
          Discover and join exciting esports tournaments. Compete with the best players and win amazing prizes.
        </p>
      </div>
    </section>

    <!-- Filters -->
    <section class="filters-section">
      <div class="container">
        <!-- Search Bar -->
        <div class="search-container">
          <div class="search-wrapper">
            <input type="text" id="tournament-search" placeholder="Search tournaments..." />
            <i class="fas fa-search search-icon"></i>
          </div>
        </div>

        <div class="filters">
          <button class="filter-btn active" data-filter="all">All Tournaments</button>
          <button class="filter-btn" data-filter="live">Live</button>
          <button class="filter-btn" data-filter="upcoming">Upcoming</button>
          <button class="filter-btn" data-filter="registration_open">Registration Open</button>
          <button class="filter-btn" data-filter="admin">Official</button>
          <button class="filter-btn" data-filter="user_hosted">Community</button>
        </div>
      </div>
    </section>

    <!-- Tournaments Grid -->
    <section class="tournaments-section">
      <div class="container">
        <!-- Loading State -->
        <div class="loading" id="loading">
          <div class="loading-spinner"></div>
          <p>Loading tournaments...</p>
        </div>

        <!-- Tournaments Grid -->
        <div class="tournaments-grid" id="tournaments-grid" style="display: none;">
          <!-- Tournament cards will be populated by JavaScript -->
        </div>
      </div>
    </section>

    <!-- Rules Section -->
    <section class="rules-section" id="rules">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title">Important Rules & Information</h2>
          <p class="section-subtitle">Essential guidelines and information for tournament participants.</p>
        </div>
        <div class="rules-content">
          <div style="display: grid; gap: 1.5rem; max-width: 900px; margin: 0 auto;">
            
            <div style="background: rgba(93, 63, 211, 0.08); padding: 1.5rem; border-radius: 12px;">
              <h3 style="margin: 0 0 0.5rem 0; font-size: 1.1rem; color: var(--primary-color);">Team Registration</h3>
              <p style="margin: 0; color: var(--text-secondary); line-height: 1.6;">Each team can register only once per tournament. Ensure all details are correct before submitting.</p>
            </div>

            <div style="background: rgba(93, 63, 211, 0.08); padding: 1.5rem; border-radius: 12px;">
              <h3 style="margin: 0 0 0.5rem 0; font-size: 1.1rem; color: var(--primary-color);">Email Requirement</h3>
              <p style="margin: 0; color: var(--text-secondary); line-height: 1.6;">Use your primary email (registered with your Uni Games account) for proper verification.</p>
            </div>

            <div style="background: rgba(93, 63, 211, 0.08); padding: 1.5rem; border-radius: 12px;">
              <h3 style="margin: 0 0 0.5rem 0; font-size: 1.1rem; color: var(--primary-color);">Player Exclusivity</h3>
              <p style="margin: 0; color: var(--text-secondary); line-height: 1.6;">Once registered, players cannot join other teams in the same tournament.</p>
            </div>

            <div style="background: rgba(93, 63, 211, 0.08); padding: 1.5rem; border-radius: 12px;">
              <h3 style="margin: 0 0 0.5rem 0; font-size: 1.1rem; color: var(--primary-color);">Brackets & Room Details</h3>
              <p style="margin: 0; color: var(--text-secondary); line-height: 1.6;">Access brackets after registration. Room ID/password shared 10 minutes before match time.</p>
            </div>

            <div style="background: rgba(93, 63, 211, 0.08); padding: 1.5rem; border-radius: 12px;">
              <h3 style="margin: 0 0 0.5rem 0; font-size: 1.1rem; color: var(--primary-color);">Fair Play</h3>
              <p style="margin: 0; color: var(--text-secondary); line-height: 1.6;">Follow tournament rules and maintain sportsmanlike conduct throughout.</p>
            </div>

          </div>
        </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="faq-section">
      <div class="container">
        <h2 class="faq-title">Frequently Asked Questions</h2>
        <div class="faq-grid">
          <div class="faq-item">
            <button class="faq-question">
              <span>What do I need to get started?</span>
              <i class="fas fa-plus"></i>
            </button>
            <div class="faq-answer">
              <p>All you need is a Uni Games account and the game you want to compete in! Check the specific
                tournament rules for any additional requirements, but generally, it's that simple to start your
                competitive journey.</p>
            </div>
          </div>
          <div class="faq-item">
            <button class="faq-question">
              <span>How are prizes awarded?</span>
              <i class="fas fa-plus"></i>
            </button>
            <div class="faq-answer">
              <p>Prizes are typically awarded within 7-14 business days after a tournament concludes and results are
                verified. Winnings are sent via the payment method you have on file in your user account.</p>
            </div>
          </div>
          <div class="faq-item">
            <button class="faq-question">
              <span>What is the fair play policy?</span>
              <i class="fas fa-plus"></i>
            </button>
            <div class="faq-answer">
              <p>We have a zero-tolerance policy for cheating, hacking, or any form of unsportsmanlike conduct. All
                players must adhere to our code of conduct, and we use advanced anti-cheat software to ensure a fair
                playing field.</p>
            </div>
          </div>
          <div class="faq-item">
            <button class="faq-question">
              <span>Can I stream my matches?</span>
              <i class="fas fa-plus"></i>
            </button>
            <div class="faq-answer">
              <p>Absolutely! We encourage players to stream their matches. Just be sure to check the specific tournament
                rules, as some events may have restrictions or require a stream delay.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-column footer-brand">
          <a href="index.html" class="brand" style="display: flex; align-items: center; gap: 0.5rem;">
            <img src="ug.png" alt="Uni Games" style="height: 60px; width: auto;">
            Uni Games
          </a>
          <p>The ultimate destination for competitive gaming.</p>
          <div class="social-links">
            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" aria-label="Discord"><i class="fab fa-discord"></i></a>
            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" aria-label="Youtube"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
        <div class="footer-column">
          <h4>Tournaments</h4>
          <ul>
            <li><a href="tournaments.html">Browse All</a></li>
            <li><a href="tournaments.html?filter=live">Live Matches</a></li>
            <li><a href="tournaments.html?filter=upcoming">Upcoming</a></li>
            <li><a href="tournaments.html?filter=completed">Past Results</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Community</h4>
          <ul>
            <li><a href="#">Discord</a></li>
            <li><a href="#">Forums</a></li>
            <li><a href="#">Support</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Company</h4>
          <ul>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Uni Games. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // API Configuration
    const API_BASE_URL = 'https://t2-237c.onrender.com';

    // Status configurations
    const statusConfig = {
      upcoming: "Upcoming",
      registration_open: "Registration Open",
      registration_closed: "Registration Closed",
      ongoing: "Ongoing",
      ended: "Ended",
      live: "Ongoing",
      completed: "Ended",
      default: "Unknown"
    };

    let currentFilter = 'all';

    // =========================
    // AUTHENTICATION FUNCTIONS
    // =========================

    function getSessionData() {
      const session = localStorage.getItem('nexus_session') || sessionStorage.getItem('nexus_session');
      try {
        return session ? JSON.parse(session) : null;
      } catch (error) {
        console.error('Error parsing session:', error);
        return null;
      }
    }

    function redirectToAuth(tab = 'register') {
      const returnUrl = encodeURIComponent(window.location.href);
      window.location.href = `auth.html?tab=${tab}&returnUrl=${returnUrl}`;
    }

    function handleLogout() {
      if (confirm('Are you sure you want to logout?')) {
        localStorage.removeItem('nexus_session');
        sessionStorage.removeItem('nexus_session');
        window.location.href = 'index.html';
      }
    }

    function checkUserAuthentication() {
      const sessionData = getSessionData();
      const guestMenu = document.getElementById('guest-menu');
      const userMenu = document.getElementById('user-menu');
      const user = sessionData?.user;

      if (user) {
        const username = user.username || user.email?.split('@')[0] || 'User';
        const userInitials = username.substring(0, 2).toUpperCase();

        // Update navbar elements
        const navbarUsername = document.getElementById('navbar-username');
        const userAvatar = document.getElementById('user-avatar');

        if (navbarUsername) navbarUsername.textContent = username;
        if (userAvatar) userAvatar.textContent = userInitials;

        // Show user menu, hide guest menu
        if (guestMenu) guestMenu.style.display = 'none';
        if (userMenu) userMenu.style.display = 'flex';
      } else {
        // Show guest menu, hide user menu
        if (guestMenu) guestMenu.style.display = 'block';
        if (userMenu) userMenu.style.display = 'none';
      }
    }

    // =========================
    // NAVBAR FUNCTIONS
    // =========================

    function initSmartNavbar() {
      const navbar = document.querySelector('.nav-normal');
      if (!navbar) return;

      let lastScrollY = window.scrollY;
      let ticking = false;

      function updateNavbar() {
        const currentScrollY = window.scrollY;

        if (currentScrollY > 50) {
          navbar.classList.add('nav-scrolled');
        } else {
          navbar.classList.remove('nav-scrolled');
        }

        if (currentScrollY > 100) {
          if (currentScrollY > lastScrollY && currentScrollY > 200) {
            navbar.classList.add('nav-hidden');
          } else {
            navbar.classList.remove('nav-hidden');
          }
        } else {
          navbar.classList.remove('nav-hidden');
        }

        lastScrollY = currentScrollY;
        ticking = false;
      }

      function requestTick() {
        if (!ticking) {
          requestAnimationFrame(updateNavbar);
          ticking = true;
        }
      }

      window.addEventListener('scroll', requestTick, { passive: true });
      updateNavbar();
    }

    function initMobileMenu() {
      const normalMenuToggle = document.getElementById('normalMenuToggle');
      const normalNav = document.getElementById('normalNav');

      if (normalMenuToggle && normalNav) {
        normalMenuToggle.addEventListener('click', (e) => {
          e.stopPropagation();
          normalMenuToggle.classList.toggle('active');
          normalNav.classList.toggle('active');
        });

        document.addEventListener('click', (e) => {
          if (!e.target.closest('.nav-normal') && normalNav.classList.contains('active')) {
            normalNav.classList.remove('active');
            normalMenuToggle.classList.remove('active');
          }
        });
      }
    }

    // =========================
    // TOURNAMENT FUNCTIONS
    // =========================

    // Check if user is registered for a specific tournament
    async function checkUserRegistrationStatus(tournamentSlug) {
      try {
        const sessionData = getSessionData();
        if (!sessionData || !sessionData.token) {
          return false; // User not logged in
        }

        const response = await fetch(`${API_BASE_URL}/api/tournaments/${tournamentSlug}/registration-status`, {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${sessionData.token}`,
            'Content-Type': 'application/json'
          }
        });

        if (!response.ok) {
          return false; // API error or user not registered
        }

        const result = await response.json();
        return result.success && result.data.isRegistered;
      } catch (error) {
        console.error('Error checking registration status:', error);
        return false;
      }
    }

    function normalizeStatus(status) {
      const statusMap = {
        'live': 'ongoing',
        'completed': 'ended',
        'cancelled': 'ended'
      };
      return statusMap[status] || status;
    }

    function getStatusBadge(status) {
      const badges = {
        'upcoming': 'Coming Soon',
        'registration_open': 'Registration Open',
        'registration_closed': 'Registration Closed',
        'ongoing': 'Live Now',
        'ended': 'Completed'
      };
      return badges[status] || 'Unknown';
    }

    async function fetchTournaments(filters = {}) {
      try {
        const params = new URLSearchParams();
        if (filters.tournament_type) params.append('tournament_type', filters.tournament_type);
        if (filters.game) params.append('game', filters.game);
        if (filters.status) params.append('status', filters.status);
        if (filters.search) params.append('search', filters.search);
        params.append('limit', '100');

        const url = `${API_BASE_URL}/api/tournaments/all?${params.toString()}`;
        const response = await fetch(url);

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();

        if (result.success) {
          return result.data.map(tournament => ({
            id: tournament._id,
            slug: tournament.slug,
            title: tournament.title,
            description: tournament.description || '',
            game: tournament.game || 'Unknown',
            status: normalizeStatus(tournament.status),
            badge: getStatusBadge(normalizeStatus(tournament.status)),
            prizePool: tournament.prizePool || 0,
            maxTeams: tournament.maxTeams || 16,
            participants: tournament.participants || [],
            registrationStart: tournament.registrationStart,
            registrationEnd: tournament.registrationEnd,
            tournamentStart: tournament.tournamentStart,
            tournamentEnd: tournament.tournamentEnd,
            posterImage: tournament.posterImage,
            hostingType: tournament.hostingType || 'admin',
            organizerUsername: tournament.organizerUsername || 'Admin',
            organizerEmail: tournament.organizerEmail || '',
            detailsLink: `tournament-details.html?slug=${tournament.slug}`
          }));
        } else {
          throw new Error(result.error || 'Failed to fetch tournaments');
        }
      } catch (error) {
        console.error('Error fetching tournaments:', error);
        return [];
      }
    }

    // Fallback tournaments data for when API fails
    const fallbackTournaments = [
      {
        id: 1,
        title: "Sample Tournament",
        description: "This is sample data",
        status: "upcoming",
        tournamentStart: new Date().toISOString(),
        tournamentEnd: new Date(Date.now() + 86400000).toISOString(),
        slug: "sample-tournament"
      }
    ];

    function createTournamentCard(tournament) {
      const statusInfo = statusConfig[tournament.status] || statusConfig.default;

      let duration = 'TBD';
      if (tournament.tournamentStart && tournament.tournamentEnd) {
        const startDate = new Date(tournament.tournamentStart);
        const endDate = new Date(tournament.tournamentEnd);
        const durationDays = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
        duration = durationDays === 1 ? '1 Day' : `${durationDays} Days`;
      }

      const normalizedStatus = normalizeStatus(tournament.status);
      const showRegisterButton = normalizedStatus === 'registration_open';

      const actionsHTML = showRegisterButton ? `
        <div class="tournament-actions" data-tournament-slug="${tournament.slug}">
          <a href="${tournament.detailsLink}" class="btn-secondary">
            <i class="fas fa-info-circle"></i> View Details
          </a>
          <button class="btn-primary register-btn" onclick="handleRegistration('${tournament.slug}')">
            <i class="fas fa-user-plus"></i> Register
          </button>
        </div>
      ` : `
        <div class="tournament-actions" data-tournament-slug="${tournament.slug}">
          <a href="${tournament.detailsLink}" class="btn-primary" style="flex: 1;">
            <i class="fas fa-info-circle"></i> View Details
          </a>
        </div>
      `;

      const prizePoolFormatted = tournament.prizePool ? `â‚¹${tournament.prizePool.toLocaleString()}` : 'TBD';

      const organizerInfo = tournament.hostingType === 'user_hosted' ? `
        <div class="organizer-info" style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; padding: 0.5rem; background: rgba(255, 215, 0, 0.1); border-radius: 8px; border-left: 3px solid var(--accent);">
          <i class="fas fa-user-crown" style="color: var(--accent); font-size: 0.9rem;"></i>
          <div style="flex: 1;">
            <div style="font-size: 0.8rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px;">Organized by</div>
            <div style="font-weight: 600; color: var(--copy); font-size: 0.9rem;">${tournament.organizerUsername}</div>
          </div>
          <div class="hosting-badge" style="background: linear-gradient(135deg, var(--accent), #e0ac10); color: #000; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase;">Community</div>
        </div>
      ` : `
        <div class="organizer-info" style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; padding: 0.5rem; background: rgba(108, 117, 125, 0.1); border-radius: 8px; border-left: 3px solid #6c757d;">
          <i class="fas fa-shield-alt" style="color: #6c757d; font-size: 0.9rem;"></i>
          <div style="flex: 1;">
            <div style="font-size: 0.8rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px;">Official Tournament</div>
            <div style="font-weight: 600; color: var(--copy); font-size: 0.9rem;">Gaming Nexus</div>
          </div>
          <div class="hosting-badge" style="background: linear-gradient(135deg, #6c757d, #495057); color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase;">Official</div>
        </div>
      `;

      return `
        <div class="tournament-card" data-status="${normalizedStatus}" data-game="${tournament.game}" data-hosting-type="${tournament.hostingType}">
          <div class="tournament-image" style="background-image: url('${tournament.posterImage || 'https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'}'); background-size: cover; background-position: center;">
            <div class="tournament-badge">${statusConfig[normalizedStatus] || 'Unknown'}</div>
          </div>
          <div class="tournament-content">
            <h3 class="tournament-title">${tournament.title}</h3>
            ${organizerInfo}
            <div class="tournament-stats">
              <div class="stat">
                <span class="stat-value">${prizePoolFormatted}</span>
                <span class="stat-label">Prize Pool</span>
              </div>
              <div class="stat">
                <span class="stat-value">${tournament.participants?.length || 0}/${tournament.maxTeams}</span>
                <span class="stat-label">Teams</span>
              </div>
              <div class="stat">
                <span class="stat-value">${duration}</span>
                <span class="stat-label">Duration</span>
              </div>
            </div>
            ${actionsHTML}
            <div class="social-sharing" style="display: flex; justify-content: center; gap: 0.5rem; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255, 255, 255, 0.1);">
              <button onclick="shareOnTwitter('${tournament.title}', '${tournament.slug}')" class="share-btn" title="Share on Twitter">
                <i class="fab fa-twitter"></i>
              </button>
              <button onclick="shareOnFacebook('${tournament.title}', '${tournament.slug}')" class="share-btn" title="Share on Facebook">
                <i class="fab fa-facebook-f"></i>
              </button>
              <button onclick="shareOnWhatsApp('${tournament.title}', '${tournament.slug}')" class="share-btn" title="Share on WhatsApp">
                <i class="fab fa-whatsapp"></i>
              </button>
              <button onclick="copyTournamentLink('${tournament.slug}')" class="share-btn" title="Copy Link">
                <i class="fas fa-link"></i>
              </button>
            </div>
          </div>
        </div>
      `;
    }

    // Update registration status for all tournament cards
    async function updateRegistrationStatus() {
      const sessionData = getSessionData();
      if (!sessionData || !sessionData.token) {
        return; // User not logged in, no need to check registration status
      }

      const tournamentActions = document.querySelectorAll('.tournament-actions[data-tournament-slug]');

      for (const actionDiv of tournamentActions) {
        const slug = actionDiv.dataset.tournamentSlug;
        const registerBtn = actionDiv.querySelector('.register-btn');

        if (registerBtn) {
          try {
            const isRegistered = await checkUserRegistrationStatus(slug);

            if (isRegistered) {
              // Clear existing buttons
              actionDiv.innerHTML = '';

              // Add "Registered" button (disabled, green)
              const registeredBtn = document.createElement('button');
              registeredBtn.className = 'btn-primary btn-success';
              registeredBtn.innerHTML = '<i class="fas fa-check-circle"></i> Registered';
              registeredBtn.disabled = true;
              registeredBtn.style.cursor = 'default';

              // Add "View Brackets" button
              const bracketsBtn = document.createElement('a');
              bracketsBtn.href = `tournament-brackets-view.html?slug=${slug}`;
              bracketsBtn.className = 'btn-secondary';
              bracketsBtn.innerHTML = '<i class="fas fa-sitemap"></i> View Brackets';

              // Append both buttons
              actionDiv.appendChild(registeredBtn);
              actionDiv.appendChild(bracketsBtn);
            }
          } catch (error) {
            console.error(`Error checking registration for ${slug}:`, error);
          }
        }
      }
    }

    function updateGridLayout() {
      const grid = document.getElementById('tournaments-grid');
      const cards = Array.from(grid.querySelectorAll('.tournament-card')).filter(card => card.style.display !== 'none');
      const cardCount = cards.length;

      grid.classList.remove('single-card', 'two-cards', 'multi-cards');

      if (cardCount === 1) {
        grid.classList.add('single-card');
      } else if (cardCount === 2) {
        grid.classList.add('two-cards');
      } else if (cardCount >= 3) {
        grid.classList.add('multi-cards');
      }
    }

    function filterTournaments(filter) {
      const cards = document.querySelectorAll('.tournament-card');
      let visibleCount = 0;

      cards.forEach(card => {
        const status = card.dataset.status;
        const hostingType = card.dataset.hostingType;
        let show = false;

        if (filter === 'all') {
          show = true;
        } else if (['live', 'upcoming', 'registration_open'].includes(filter)) {
          show = status === filter;
        } else if (filter === 'admin') {
          show = hostingType === 'admin';
        } else if (filter === 'user_hosted') {
          show = hostingType === 'user_hosted';
        }

        if (show) {
          card.style.display = 'block';
          visibleCount++;
        } else {
          card.style.display = 'none';
        }
      });

      const grid = document.getElementById('tournaments-grid');
      const existingMessage = grid.querySelector('.filter-message');
      if (existingMessage) existingMessage.remove();

      if (visibleCount === 0 && cards.length > 0) {
        const message = document.createElement('div');
        message.className = 'filter-message';
        message.style.cssText = 'grid-column: 1 / -1; text-align: center; padding: 3rem 1rem; color: var(--muted);';
        message.innerHTML = `
          <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
          <h3 style="margin-bottom: 0.5rem; color: var(--copy);">No tournaments found</h3>
          <p>No tournaments match the selected filter. Try a different category.</p>
        `;
        grid.appendChild(message);
      } else {
        updateGridLayout();
      }
    }

    function searchTournaments(query) {
      const cards = document.querySelectorAll('.tournament-card');
      let visibleCount = 0;

      cards.forEach(card => {
        const title = card.querySelector('.tournament-title').textContent.toLowerCase();
        const game = card.dataset.game.toLowerCase();
        const searchQuery = query.toLowerCase();
        const matches = title.includes(searchQuery) || game.includes(searchQuery);

        if (matches || query === '') {
          const status = card.dataset.status;
          const hostingType = card.dataset.hostingType;
          let showByFilter = false;

          if (currentFilter === 'all') {
            showByFilter = true;
          } else if (['live', 'upcoming', 'registration_open'].includes(currentFilter)) {
            showByFilter = status === currentFilter;
          } else if (currentFilter === 'admin') {
            showByFilter = hostingType === 'admin';
          } else if (currentFilter === 'user_hosted') {
            showByFilter = hostingType === 'user_hosted';
          }

          if (showByFilter) {
            card.style.display = 'block';
            visibleCount++;
          } else {
            card.style.display = 'none';
          }
        } else {
          card.style.display = 'none';
        }
      });

      const grid = document.getElementById('tournaments-grid');
      const existingMessage = grid.querySelector('.search-message');
      if (existingMessage) existingMessage.remove();

      if (visibleCount === 0 && cards.length > 0) {
        const message = document.createElement('div');
        message.className = 'search-message';
        message.style.cssText = 'grid-column: 1 / -1; text-align: center; padding: 3rem 1rem; color: var(--muted);';
        message.innerHTML = `
          <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
          <h3 style="margin-bottom: 0.5rem; color: var(--copy);">No tournaments found</h3>
          <p>No tournaments match your search "${query}". Try different keywords.</p>
        `;
        grid.appendChild(message);
      } else {
        updateGridLayout();
      }
    }

    function handleRegistration(tournamentSlug) {
      const session = localStorage.getItem('nexus_session') || sessionStorage.getItem('nexus_session');
      if (!session) {
        alert('Please log in to register for tournaments');
        redirectToAuth();
        return;
      }
      window.location.href = `team-registration.html?slug=${tournamentSlug}`;
    }

    function shareOnTwitter(title, slug) {
      const url = `${window.location.origin}/tournament-details.html?slug=${slug}`;
      const text = `Check out this amazing tournament: ${title}`;
      const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}&hashtags=esports,gaming,tournament`;
      window.open(twitterUrl, '_blank', 'width=600,height=400');
    }

    function shareOnFacebook(title, slug) {
      const url = `${window.location.origin}/tournament-details.html?slug=${slug}`;
      const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
      window.open(facebookUrl, '_blank', 'width=600,height=400');
    }

    function shareOnWhatsApp(title, slug) {
      const url = `${window.location.origin}/tournament-details.html?slug=${slug}`;
      const text = `Check out this amazing tournament: ${title} - ${url}`;
      const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text)}`;
      window.open(whatsappUrl, '_blank');
    }

    function copyTournamentLink(slug) {
      const url = `${window.location.origin}/tournament-details.html?slug=${slug}`;
      navigator.clipboard.writeText(url).then(() => {
        const btn = event.target.closest('.share-btn');
        const originalIcon = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check"></i>';
        btn.style.background = 'rgba(40, 167, 69, 0.2)';
        btn.style.color = '#28a745';

        setTimeout(() => {
          btn.innerHTML = originalIcon;
          btn.style.background = 'rgba(255, 255, 255, 0.1)';
          btn.style.color = 'var(--muted)';
        }, 2000);
      }).catch(() => {
        const textArea = document.createElement('textarea');
        textArea.value = url;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);

        const btn = event.target.closest('.share-btn');
        const originalIcon = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check"></i>';
        btn.style.background = 'rgba(40, 167, 69, 0.2)';
        btn.style.color = '#28a745';

        setTimeout(() => {
          btn.innerHTML = originalIcon;
          btn.style.background = 'rgba(255, 255, 255, 0.1)';
          btn.style.color = 'var(--muted)';
        }, 2000);
      });
    }

    async function initializePage() {
      try {
        document.getElementById('loading').style.display = 'block';
        document.getElementById('tournaments-grid').style.display = 'none';

        const tournaments = await fetchTournaments();
        const grid = document.getElementById('tournaments-grid');

        if (tournaments.length === 0) {
          grid.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 1rem; color: var(--muted);">
              <i class="fas fa-trophy" style="font-size: 4rem; margin-bottom: 1.5rem; opacity: 0.3;"></i>
              <h3 style="margin-bottom: 1rem; color: var(--copy); font-size: 1.5rem;">No Tournaments Available</h3>
              <p style="font-size: 1rem; line-height: 1.6; max-width: 400px; margin: 0 auto;">
                There are currently no tournaments scheduled. Check back soon for exciting new competitions!
              </p>
              <button onclick="initializePage()" style="margin-top: 1.5rem; padding: 0.75rem 1.5rem; background: var(--accent); color: #000; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                <i class="fas fa-sync-alt"></i> Refresh
              </button>
            </div>
          `;
        } else {
          grid.innerHTML = tournaments.map(tournament => createTournamentCard(tournament)).join('');

          // Check registration status for logged-in users
          updateRegistrationStatus();
        }

        document.getElementById('loading').style.display = 'none';
        document.getElementById('tournaments-grid').style.display = 'grid';
        updateGridLayout();

        document.querySelectorAll('.filter-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentFilter = btn.dataset.filter;
            const searchInput = document.getElementById('tournament-search');
            if (searchInput.value) searchInput.value = '';
            filterTournaments(currentFilter);
          });
        });

        const searchInput = document.getElementById('tournament-search');
        if (searchInput) {
          searchInput.addEventListener('input', (e) => searchTournaments(e.target.value));
        }

        window.tournamentsData = tournaments;

      } catch (error) {
        console.error('Error loading tournaments:', error);
        document.getElementById('loading').style.display = 'none';
        document.getElementById('tournaments-grid').style.display = 'block';
        document.getElementById('tournaments-grid').innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: var(--muted);">
            <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
            <h3 style="margin-bottom: 0.5rem; color: var(--copy);">Error Loading Tournaments</h3>
            <p style="margin-bottom: 1rem;">Unable to load tournaments. Please check your connection and try again.</p>
            <button onclick="initializePage()" style="padding: 0.75rem 1.5rem; background: var(--accent); color: #000; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
              <i class="fas fa-sync-alt"></i> Retry
            </button>
          </div>
        `;
      }
    }

    // =========================
    // FAQ FUNCTIONALITY
    // =========================

    function initializeFAQ() {
      const faqItems = document.querySelectorAll('.faq-item');

      faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');

        question.addEventListener('click', () => {
          const isActive = item.classList.contains('active');

          // Close all other FAQ items
          faqItems.forEach(otherItem => {
            if (otherItem !== item) {
              otherItem.classList.remove('active');
            }
          });

          // Toggle current item
          if (isActive) {
            item.classList.remove('active');
          } else {
            item.classList.add('active');
          }
        });
      });
    }

    // =========================
    // INITIALIZATION
    // =========================

    document.addEventListener('DOMContentLoaded', () => {
      // Initialize navbar
      checkUserAuthentication();
      initSmartNavbar();
      initMobileMenu();

      // Initialize FAQ
      initializeFAQ();

      // Initialize page
      initializePage();
    });
  </script>


</body>

</html>