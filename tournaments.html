<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tournaments - GamingNexus</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

  <style>
    /* =========================
       NAVBAR STYLES (Embedded)
       ========================= */
    
    /* General Header Styles */
    header.site-header {
      position: fixed;
      inset: 0 0 auto 0;
      background: rgba(26, 26, 26, 0.5); 
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      z-index: 1200;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      height: 60px;
    }

    .header-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 2rem;
      height: 100%;
      max-width: 1400px;
      margin: 0 auto;
    }

    .brand {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--copy);
      text-decoration: none;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    /* Navigation Styles */
    .primary {
      display: flex;
      align-items: center;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .nav-links a {
      color: var(--copy, #F0F0F0);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      transition: color 0.3s ease;
      padding: 0.5rem 0;
    }

    .nav-links a:hover {
      color: var(--accent-2, #0AFAD9);
    }

    .nav-links a.active {
      color: var(--accent-2, #0AFAD9);
      font-weight: 600;
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-left: 2rem;
      padding-left: 2rem;
      border-left: 1px solid rgba(255, 255, 255, 0.2);
    }

    .header-cta {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #fff;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .header-cta:hover {
      opacity: 0.8;
      filter: brightness(0.9);
    }

    /* Host Button Styles */
    .host-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: #ffffff;
      color: #000000;
      border: none;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

    .host-btn:hover {
      opacity: 0.8;
      filter: brightness(0.9);
    }

    .host-btn i {
      font-size: 1rem;
    }

    /* Profile Dropdown (Desktop) */
    .profile-dropdown { 
      position: relative; 
      display: flex; 
      align-items: center; 
    }
    
    .profile-icon { 
      width: 40px; 
      height: 40px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      color: var(--copy); 
      cursor: pointer; 
      border-radius: 50%; 
      transition: all 0.3s ease; 
      font-size: 1.5rem; 
    }
    
    .profile-icon:hover { 
      color: var(--accent); 
      background: rgba(255, 69, 0, 0.1); 
      transform: scale(1.1); 
    }
    
    .profile-modal { 
      position: absolute; 
      top: 100%; 
      right: 0; 
      background: var(--panel); 
      border: 1px solid rgba(255, 255, 255, 0.1); 
      border-radius: 12px; 
      min-width: 280px; 
      opacity: 0; 
      visibility: hidden; 
      transform: translateY(-10px); 
      transition: all 0.3s ease; 
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5); 
      z-index: 1000; 
      margin-top: 10px; 
    }
    
    .profile-dropdown:hover .profile-modal { 
      opacity: 1; 
      visibility: visible; 
      transform: translateY(0); 
    }
    
    .profile-header { 
      display: flex; 
      align-items: center; 
      gap: 1rem; 
      padding: 1rem; 
      border-bottom: 1px solid rgba(255, 255, 255, 0.1); 
    }
    
    .profile-photo { 
      width: 50px; 
      height: 50px; 
      background: linear-gradient(135deg, var(--accent), var(--accent-2)); 
      border-radius: 50%; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      color: #000; 
      font-size: 1.5rem; 
      flex-shrink: 0; 
    }
    
    .profile-username { 
      font-weight: 700; 
      font-size: 1.1rem; 
    }
    
    .profile-userid {
      font-size: 0.8rem;
      color: var(--muted);
      margin-top: 0.25rem;
    }
    
    .profile-actions { 
      padding: 0.5rem; 
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .profile-action { 
      display: flex; 
      align-items: center; 
      gap: 0.75rem; 
      padding: 0.5rem 1rem; 
      color: var(--muted); 
      text-decoration: none; 
      border-radius: 8px; 
      transition: all 0.3s ease; 
      font-weight: 600; 
      width: 100%; 
      border: none; 
      background: none; 
      cursor: pointer; 
      font-family: inherit; 
    }
    
    .profile-action:hover { 
      background: rgba(255, 255, 255, 0.05); 
      color: var(--accent); 
      transform: translateX(4px); 
    }
    
    .logout-action:hover { 
      background: rgba(255, 0, 0, 0.1); 
      color: #ff6b6b; 
    }

    /* Mobile Navigation Bottom Actions */
    .mobile-nav-bottom-actions {
      padding: 1rem 0.75rem 0.75rem 0.75rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: auto;
      display: flex;
      gap: 0.8rem;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
    }

    .mobile-logout-btn {
      display: inline-flex !important;
      align-items: center !important;
      gap: 0.4rem !important;
      padding: 0.5rem 0.8rem !important;
      background: rgba(255, 0, 0, 0.1) !important;
      color: #ff6b6b !important;
      border: 1px solid rgba(255, 107, 107, 0.3) !important;
      border-radius: 5px !important;
      text-decoration: none !important;
      font-weight: 600 !important;
      font-size: 0.85rem !important;
      line-height: 1 !important;
      transition: all 0.3s ease !important;
      cursor: pointer !important;
      flex: 1 !important;
      max-width: 120px !important;
      min-height: 36px !important;
      justify-content: center !important;
    }

    .mobile-logout-btn:hover {
      background: rgba(255, 0, 0, 0.2) !important;
      border-color: rgba(255, 107, 107, 0.5) !important;
    }

    .mobile-logout-btn i {
      font-size: 0.85rem !important;
      color: inherit !important;
    }

    /* Hamburger & Mobile Nav Panel */
    .hamburger { 
      display: none; 
      background: none; 
      border: none; 
      color: var(--copy); 
      font-size: 1.5rem; 
      cursor: pointer; 
    }
    
    .mobile-nav { 
      position: fixed; 
      top: 0; 
      right: -100%; 
      width: 300px; 
      height: 100vh; 
      background: var(--panel); 
      z-index: 2000; 
      transition: right 0.4s cubic-bezier(0.25, 1, 0.5, 1); 
      box-shadow: -10px 0 30px rgba(0,0,0,0.5); 
      padding-top: 60px; 
      padding-bottom: 20px;
      display: flex; 
      flex-direction: column; 
      border-radius: 0 0 0 15px;
      overflow-y: auto;
      box-sizing: border-box;
    }
    
    .mobile-nav.is-open { 
      right: 0; 
    }
    
    .mobile-nav-close { 
      position: absolute; 
      top: 0.75rem; 
      right: 1rem; 
      background: none; 
      border: none; 
      color: var(--muted); 
      font-size: 1.5rem; 
      cursor: pointer; 
      line-height: 1; 
      transition: color 0.2s ease, transform 0.3s ease; 
    }
    
    .mobile-nav-close:hover { 
      color: var(--copy); 
      transform: rotate(90deg); 
    }

    .mobile-nav .guest-view { 
      padding: 1rem; 
      text-align: center; 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      gap: 0.75rem; 
      margin-top: 0.5rem; 
    }

    /* Button container for side-by-side layout */
    .mobile-nav .guest-view .button-container {
      display: flex;
      gap: 0.8rem;
      width: 100%;
      justify-content: center;
      align-items: center;
    }
    
    .mobile-nav .guest-view i { 
      font-size: 2rem; 
      color: var(--accent); 
    }
    
    .mobile-nav .guest-view p { 
      color: var(--muted); 
      line-height: 1.6; 
    }

    /* Mobile Navigation Links Styling */
    .mobile-nav-links {
        padding: 0.5rem;
        margin-top: 0.5rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }

    .mobile-nav-links a {
        color: var(--muted);
        text-decoration: none;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.2s ease;
    }

    .mobile-nav-links a:hover {
        background: rgba(255, 255, 255, 0.05);
        color: var(--copy);
    }

    .mobile-nav-links a i {
        margin-right: 0.5rem;
        color: var(--accent-2, #0AFAD9);
    }

    /* Mobile Navigation Buttons */
    .mobile-nav .mobile-host-btn,
    .guest-view .mobile-host-btn,
    a.mobile-host-btn,
    .mobile-nav-bottom-actions .mobile-host-btn {
        display: inline-flex !important;
        align-items: center !important;
        gap: 0.4rem !important;
        padding: 0.5rem 0.8rem !important;
        background: #ffffff !important;
        background-color: #ffffff !important;
        background-image: none !important;
        color: #000000 !important;
        border: none !important;
        border-radius: 5px !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        font-size: 0.85rem !important;
        line-height: 1 !important;
        transition: all 0.3s ease !important;
        margin-bottom: 0 !important;
        width: auto !important;
        justify-content: center !important;
        box-sizing: border-box !important;
        flex: 1 !important;
        max-width: 120px !important;
        min-height: 36px !important;
        cursor: pointer !important;
    }

    /* Icon sizing for mobile host button */
    .mobile-nav .mobile-host-btn i,
    .guest-view .mobile-host-btn i,
    a.mobile-host-btn i {
        font-size: 0.85rem !important;
        color: #000000 !important;
    }

    .mobile-nav .mobile-host-btn:hover,
    .guest-view .mobile-host-btn:hover,
    a.mobile-host-btn:hover,
    .mobile-nav-bottom-actions .mobile-host-btn:hover {
        opacity: 0.8 !important;
        filter: brightness(0.9) !important;
    }

    .mobile-join-btn {
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        gap: 0.4rem !important;
        padding: 0.5rem 0.8rem !important;
        background: linear-gradient(135deg, var(--accent, #5D3FD3), var(--accent-2, #0AFAD9)) !important;
        color: #ffffff !important;
        border: none !important;
        border-radius: 5px !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        font-size: 0.85rem !important;
        line-height: 1 !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        margin-bottom: 0 !important;
        width: auto !important;
        box-sizing: border-box !important;
        flex: 1 !important;
        max-width: 200px !important;
        min-height: 36px !important;
        margin: 0;
    }

    .mobile-join-btn:hover {
        opacity: 0.8;
        filter: brightness(0.9);
    }

    /* Force override any inherited button styles */
    .mobile-host-btn * {
        color: inherit !important;
    }
    
    /* Additional specificity for mobile host button */
    #mobile-nav .guest-view a[href="user-dashboard.html"] {
        background: #ffffff !important;
        background-color: #ffffff !important;
        background-image: none !important;
        color: #000000 !important;
    }
    
    #mobile-nav .guest-view a[href="user-dashboard.html"]:hover {
        opacity: 0.8 !important;
        filter: brightness(0.9) !important;
    }

    /* Responsive Media Queries */
    @media (max-width: 768px) {
      .header-container {
        padding: 0 1rem;
      }
      
      .primary {
        display: none;
      }
      
      .nav-actions { 
        display: none; 
      }
      
      .hamburger { 
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      
      /* Hide host button on mobile - will be in mobile menu */
      .host-btn { 
        display: none;
      }
    }

    @media (min-width: 1600px) {
      header.site-header { 
        height: 80px; 
        padding: 0 3rem; 
      }
      
      .back-btn, .header-cta, .profile-username { 
        font-size: 1.1rem; 
      }
      
      .header-cta { 
        padding: 0.7rem 1.25rem; 
      }
      
      .profile-icon { 
        font-size: 1.75rem; 
      }
    }

    /* =========================
       Theme variables (Cyberpunk) - Matching index.html
       ========================= */
    :root {
      --primary-color: #0AFAD9;      /* Electric Cyan */
      --bg-dark: #0D0A1A;            /* Dark Matter Black */
      --accent-secondary: #5D3FD3;   /* Deep Indigo */
      --panel: #161329;              /* Dark Indigo Panel */
      --text-primary: #F0F0F0;       /* Starlight White */
      --text-secondary: rgba(240, 240, 240, 0.7);
      --border-color: rgba(10, 250, 217, 0.2);
      --ease: 0.3s ease;

      /* Legacy variables for compatibility */
      --copy: var(--text-primary);
      --muted: var(--text-secondary);
      --accent: var(--accent-secondary); /* Using Indigo as main accent */
      --accent-2: var(--primary-color); /* Using Cyan as secondary accent */
      --radius: 12px;
      --container: 1400px;
      
      /* Additional colors */
      --success-color: #28a745;
      --warning-color: #ffc107;
      --danger-color: #dc3545;
      --info-color: #17a2b8;
      
      /* Enhanced easing curves */
      --ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);
      --ease-in-out-quart: cubic-bezier(0.76, 0, 0.24, 1);
      --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    body {
      margin: 0;
      font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      line-height: 1.6;
      min-height: 100vh;
    }

    .tournaments-container {
      background: var(--panel);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      margin: 20px auto;
      max-width: 1400px;
      overflow: hidden;
      border: 1px solid var(--border-color);
    }

    .tournaments-header {
      background: linear-gradient(135deg, var(--primary-color), #8e44ad);
      color: white;
      padding: 2rem;
      text-align: center;
    }

    .filters-section {
      background: var(--bg-dark);
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    /* Tournament Card Styles - Matching index.html */
    .tournament-card {
      background: var(--panel);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      border: 1px solid var(--border-color);
      text-decoration: none;
      color: var(--text-primary);
      display: flex;
      flex-direction: column;
      margin-bottom: 1.5rem;
      position: relative;
    }
    
    .tournament-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      border-color: var(--primary-color);
    }
    
    .tournament-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    
    .tournament-content {
      padding: 1.5rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    
    .tournament-card h3 {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1rem;
      line-height: 1.4;
      color: var(--text-primary);
    }
    
    .tournament-card p {
      color: var(--text-secondary);
      font-size: 0.9rem;
      line-height: 1.5;
    }

    /* Tournament Status Badge */
    .tournament-status-badge {
      position: absolute;
      top: 1rem;
      right: 1rem;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      z-index: 2;
    }

    .status-live {
      background: linear-gradient(135deg, #ff4757, #ff3742);
      color: white;
    }

    .status-upcoming {
      background: linear-gradient(135deg, var(--primary-color), #00d2ff);
      color: var(--bg-dark);
    }

    .status-registration {
      background: linear-gradient(135deg, #2ed573, #7bed9f);
      color: var(--bg-dark);
    }

    .status-completed {
      background: linear-gradient(135deg, #5f27cd, #341f97);
      color: white;
    }

    .container {
      width: min(94%, var(--container));
      margin: 0 auto;
    }

    /* Main content */
    main {
      margin-top: 60px;
      min-height: calc(100vh - 60px);
    }

    /* Active navigation link */
    .nav-links a.active {
      color: var(--primary-color);
      font-weight: 700;
    }

    /* Page Header */
    .page-header {
      padding: 4rem 0 2rem;
      text-align: center;
    }

    .page-title {
      font-size: clamp(2.5rem, 5vw, 4rem);
      font-weight: 800;
      margin-bottom: 1rem;
      line-height: 1.1;
    }

    .page-subtitle {
      font-size: 1.2rem;
      color: var(--muted);
      max-width: 600px;
      margin: 0 auto 2rem;
      line-height: 1.5;
    }

    /* Filters */
    .filters-section {
      padding: 2rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      z-index: 10;
    }

    .filters {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
      justify-content: center;
      padding: 2px 1rem 0 1rem; /* Added 2px top padding to prevent hover cut-off */
      position: relative;
      z-index: 11;
    }

    /* Search Bar Styles */
    .search-container {
      margin-bottom: 2.3125rem; /* 2rem + 5px = 37px total */
      display: flex;
      justify-content: center;
      position: relative;
      z-index: 5;
      background: transparent;
    }

    .search-wrapper {
      position: relative;
      max-width: 400px;
      width: 100%;
    }

    #tournament-search {
      width: 100%;
      padding: 0.75rem 1rem 0.75rem 2.5rem;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 25px;
      color: var(--copy);
      font-size: 1rem;
      outline: none;
      transition: all 0.3s ease;
      box-sizing: border-box;
    }

    #tournament-search:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(10, 250, 217, 0.2);
      background: rgba(255, 255, 255, 0.15);
    }

    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
      pointer-events: none;
      z-index: 6;
    }

    .filter-btn {
      padding: 0.6rem 1.2rem;
      background: transparent;
      border: 2px solid var(--border-color);
      border-radius: 25px;
      color: var(--text-secondary);
      font-weight: 500;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .filter-btn:hover {
      border-color: var(--primary-color);
      color: var(--primary-color);
      transform: translateY(-2px);
    }

    .filter-btn.active {
      background: var(--primary-color);
      border-color: var(--primary-color);
      color: var(--bg-dark);
      font-weight: 600;
    }

    /* Tournaments Grid */
    .tournaments-section {
      padding: 4rem 0;
    }

    .tournaments-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .tournament-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.3s var(--ease-out-quart);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .tournament-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 215, 0, 0.2);
    }

    .tournament-image {
      height: 200px;
      background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
      position: relative;
      overflow: hidden;
    }

    .tournament-image::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 30% 40%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 70% 60%, rgba(255, 215, 0, 0.05) 0%, transparent 50%);
    }

    .tournament-badge {
      position: absolute;
      top: 1rem;
      left: 1rem;
      background: rgba(255, 215, 0, 0.9);
      color: #000;
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
    }

    .tournament-content {
      padding: 1.5rem;
    }

    .tournament-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      line-height: 1.2;
    }

    .tournament-description {
      color: var(--muted);
      font-size: 0.9rem;
      line-height: 1.4;
      margin-bottom: 1rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .tournament-stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--accent);
      display: block;
    }

    .stat-label {
      font-size: 0.75rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .tournament-actions {
      display: flex;
      gap: 0.75rem;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #06110a;
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s var(--ease-out-back);
      border: none;
      cursor: pointer;
      flex: 1;
      text-align: center;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: var(--copy);
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      font-weight: 500;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
      flex: 1;
      text-align: center;
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 215, 0, 0.3);
    }

    /* Loading State */
    .loading {
      text-align: center;
      padding: 4rem 0;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255, 215, 0, 0.3);
      border-top: 3px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* Footer Styles */
    footer.site-footer {
      padding: 2.5rem 1rem;
      background: #070707;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .footer-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 2rem;
      margin-bottom: 1.5rem;
    }

    .footer-column h4 {
      color: var(--copy);
      font-weight: 700;
      margin-bottom: 1rem;
    }

    .footer-column ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .footer-column ul li {
      margin-bottom: 0.5rem;
    }

    .footer-column ul a {
      color: var(--muted);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-column ul a:hover {
      color: var(--accent);
    }

    .footer-bottom {
      text-align: center;
      margin-top: 1.25rem;
      padding-top: 1.25rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--muted);
    }

    .footer-brand p {
      color: var(--muted);
      margin-top: 0.5rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .footer-grid {
        grid-template-columns: 1fr;
        text-align: center;
        gap: 1.5rem;
      }

      .tournaments-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }

      .filters {
        justify-content: flex-start;
        overflow-x: auto;
        padding: 2px 1rem 0.5rem 1rem; /* Added 2px top padding for hover effect */
        scrollbar-width: none;
        -ms-overflow-style: none;
        gap: 0.5rem;
      }

      .filters::-webkit-scrollbar {
        display: none;
      }

      .filter-btn {
        white-space: nowrap;
        flex-shrink: 0;
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
      }

      .tournaments-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
        padding: 0 1rem;
      }

      .page-header {
        padding: 2rem 1rem 1rem;
      }

      .page-title {
        font-size: 2rem;
      }

      .tournament-actions {
        flex-direction: column;
      }

      .page-title {
        font-size: clamp(2rem, 8vw, 3rem);
      }

      .page-subtitle {
        font-size: 1rem;
        padding: 0 1rem;
      }

      /* Search bar responsive improvements */
      .search-container {
        padding: 0 1rem;
        margin-bottom: 1.8125rem; /* 1.5rem + 5px = 29px total */
      }

      .search-wrapper {
        max-width: 100%;
      }

      #tournament-search {
        font-size: 16px !important; /* Prevents zoom on iOS */
        padding: 0.875rem 1rem 0.875rem 2.75rem;
      }

      .search-icon {
        left: 1.125rem;
      }
    }

    @media (max-width: 480px) {
      .tournament-stats {
        flex-direction: column;
        gap: 0.75rem;
      }

      .stat {
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-align: left;
      }

      .stat-value {
        font-size: 1rem;
      }

      .stat-label {
        font-size: 0.8rem;
      }

      /* Mobile search bar adjustments */
      .search-container {
        margin-bottom: 1.3125rem; /* 1rem + 5px = 21px total */
      }

      #tournament-search {
        padding: 1rem 1rem 1rem 3rem;
        font-size: 16px !important;
        border-radius: 30px;
      }

      .search-icon {
        left: 1.25rem;
        font-size: 1.1rem;
      }

      .filters-section {
        padding: 1.5rem 0;
      }

      .filters {
        padding: 2px 0.5rem 0.5rem 0.5rem; /* Added 2px top padding for hover effect */
        gap: 0.4rem;
      }

      .filter-btn {
        padding: 0.6rem 1rem;
        font-size: 0.8rem;
        border-radius: 20px;
      }
    }



    #user-menu {
      display: flex;
      align-items: center;
    }

    /* Custom Scrollbar Design */
    .scrollbar {
      margin-left: 30px;
      float: left;
      height: 300px;
      width: 65px;
      background: var(--panel);
      overflow-y: scroll;
      margin-bottom: 25px;
    }

    .force-overflow {
      min-height: 450px;
    }

    /* Custom Scrollbar Styles */
    ::-webkit-scrollbar-track {
      border: 1px solid var(--border-color);
      background-color: var(--bg-dark);
    }

    ::-webkit-scrollbar {
      width: 10px;
      background-color: var(--bg-dark);
    }

    ::-webkit-scrollbar-thumb {
      background-color: var(--panel);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background-color: var(--accent-secondary);
    }

    /* Firefox scrollbar */
    * {
      scrollbar-width: thin;
      scrollbar-color: var(--panel) var(--bg-dark);
    }

    /* Social sharing buttons */
    .share-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      background: rgba(255, 255, 255, 0.1);
      color: var(--muted);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .share-btn:hover {
      background: rgba(255, 215, 0, 0.2);
      color: var(--accent);
      transform: translateY(-2px);
    }

    .share-btn:active {
      transform: translateY(0);
    }
  </style>
</head>

<body>
  <header class="site-header" role="banner">
  <div class="header-container">
      <a href="index.html" class="brand" aria-hidden="false">GamingNexus</a>
      <div class="header-right">
          <nav class="primary" role="navigation" aria-label="Primary">
              <div class="nav-links" role="menubar">
                  <a href="index.html" role="menuitem">Home</a>
                  <a href="tournaments.html" role="menuitem" class="active">Tournaments</a>
                  <a href="index.html#why-us" role="menuitem">Why Us</a>
                  <a href="index.html#faq" role="menuitem">FAQ</a>
              </div>
          </nav>
          <div class="nav-actions">
            <div id="guest-menu">
              <button class="header-cta" onclick="redirectToAuth()">Join Us</button>
            </div>
            <div id="user-menu" style="display: none;">
              <div class="profile-dropdown">
                <div class="profile-icon" id="profile-icon">
                  <i class="fas fa-user-circle"></i>
                </div>
                <div class="profile-modal" id="profile-modal">
                  <div class="profile-header">
                    <div class="profile-photo"><i class="fas fa-user"></i></div>
                    <div class="profile-info">
                      <div class="profile-username" id="modal-username">User</div>
                    </div>
                  </div>
                  <div class="profile-actions">
                    <a href="user-dashboard.html" class="profile-action" id="modal-dashboard-link">
                      <i class="fas fa-user"></i>
                      <span>My Account</span>
                    </a>
                    <button class="profile-action logout-action" onclick="logout()">
                      <i class="fas fa-sign-out-alt"></i>
                      <span>Logout</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button class="hamburger" aria-label="Toggle menu" aria-expanded="false">
              <i class="fas fa-bars"></i>
          </button>
      </div>   
  </div>
</header>

<div id="mobile-nav" class="mobile-nav" hidden>
  <button class="mobile-nav-close" onclick="closeMobileNav()">
    <i class="fas fa-times"></i>
  </button>
  
  <!-- Guest View (when not logged in) -->
  <div id="mobile-guest-view" class="guest-view">
    <i class="fas fa-user-circle"></i>
    <p>Join GamingNexus to host tournaments and compete with the best players!</p>
    <a href="user-dashboard.html" class="mobile-host-btn">
      <i class="fas fa-plus-circle"></i>
      Host Tournament
    </a>
    <button class="mobile-join-btn" onclick="redirectToAuth()">
      Join Us
    </button>
  </div>
  
  <!-- Navigation Links -->
  <div class="mobile-nav-links">
    <a href="index.html">
      <i class="fas fa-home"></i>
      Home
    </a>
    <a href="tournaments.html">
      <i class="fas fa-trophy"></i>
      Tournaments
    </a>
    <a href="index.html#why-us">
      <i class="fas fa-star"></i>
      Why Us
    </a>
    <a href="index.html#faq">
      <i class="fas fa-question-circle"></i>
      FAQ
    </a>
  </div>
</div>

  <main>
    <!-- Page Header -->
    <section class="page-header">
      <div class="container">
        <h1 class="page-title">Browse All Tournaments</h1>
        <p class="page-subtitle">
          Discover and join exciting esports tournaments. Compete with the best players and win amazing prizes.
        </p>
      </div>
    </section>

    <!-- Filters -->
    <section class="filters-section">
      <div class="container">
        <!-- Search Bar -->
        <div class="search-container">
          <div class="search-wrapper">
            <input type="text" id="tournament-search" placeholder="Search tournaments..." />
            <i class="fas fa-search search-icon"></i>
          </div>
        </div>

        <div class="filters">
          <button class="filter-btn active" data-filter="all">All Tournaments</button>
          <button class="filter-btn" data-filter="live">Live</button>
          <button class="filter-btn" data-filter="upcoming">Upcoming</button>
          <button class="filter-btn" data-filter="registration_open">Registration Open</button>
          <button class="filter-btn" data-filter="admin">Official</button>
          <button class="filter-btn" data-filter="user_hosted">Community</button>
        </div>
      </div>
    </section>

    <!-- Tournaments Grid -->
    <section class="tournaments-section">
      <div class="container">
        <!-- Loading State -->
        <div class="loading" id="loading">
          <div class="loading-spinner"></div>
          <p>Loading tournaments...</p>
        </div>

        <!-- Tournaments Grid -->
        <div class="tournaments-grid" id="tournaments-grid" style="display: none;">
          <!-- Tournament cards will be populated by JavaScript -->
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-column footer-brand">
          <h4><a href="index.html" style="color: var(--copy); text-decoration: none;">GamingNexus</a></h4>
          <p>The ultimate destination for competitive gaming.</p>
        </div>
        <div class="footer-column">
          <h4>Tournaments</h4>
          <ul>
            <li><a href="tournaments.html">Browse All</a></li>
            <li><a href="tournaments.html?filter=live">Live Matches</a></li>
            <li><a href="tournaments.html?filter=upcoming">Upcoming</a></li>
            <li><a href="tournaments.html?filter=registration_open">Registration Open</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Community</h4>
          <ul>
            <li><a href="#">Discord</a></li>
            <li><a href="#">Forums</a></li>
            <li><a href="#">Support</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Company</h4>
          <ul>
            <li><a href="#">About</a></li>
            <li><a href="auth.html?tab=login&returnUrl=tournaments.html">Sign In</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 GamingNexus. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // Helper function to redirect to auth with return URL
    function redirectToAuth(tab = 'register') {
      const currentUrl = window.location.href;
      const returnUrl = encodeURIComponent(currentUrl);
      window.location.href = `auth.html?tab=${tab}&returnUrl=${returnUrl}`;
    }

    // Simulated tournament data (would come from backend API)
    const tournamentsData = [
      {
        id: 1,
        title: "PUBG Global Series 2025",
        description: "The biggest PUBG tournament of the year is here! Join us as the best teams from around the world battle it out in London for the title of Global Champions.",
        prizePool: "$500K",
        teams: "32",
        duration: "7 Days",
        status: "registration",
        game: "pubg",
        detailsLink: "tournament-details.html?tournament=pubg-global-series-2025",
        badge: "Featured"
      },
      {
        id: 2,
        title: "BGMI Masters Championship",
        description: "India's premier BGMI tournament featuring the country's top teams competing for glory and massive prizes in an epic battle royale showdown.",
        prizePool: "$300K",
        teams: "24",
        duration: "5 Days",
        status: "upcoming",
        game: "bgmi",
        detailsLink: "tournament-bgmi-masters.html",
        badge: "Premium"
      },
      {
        id: 3,
        title: "BGMI Championship Series",
        description: "The biggest BGMI tournament of the year! Assemble your squad and compete against India's best players for the ultimate battle royale championship title.",
        prizePool: "$750K",
        teams: "48",
        duration: "10 Days",
        status: "registration",
        game: "bgmi",
        detailsLink: "tournament-championship-series.html",
        badge: "Championship"
      },
      {
        id: 4,
        title: "PUBG Mobile World Cup",
        description: "Global championship featuring the best PUBG Mobile teams from around the world competing for the ultimate title and massive prize pool.",
        prizePool: "$1M",
        teams: "64",
        duration: "14 Days",
        status: "upcoming",
        game: "pubg",
        detailsLink: "#",
        badge: "World Cup"
      },
      {
        id: 5,
        title: "BGMI Pro League Season 3",
        description: "Professional league featuring India's top BGMI teams competing in a season-long format with weekly matches and playoffs.",
        prizePool: "$200K",
        teams: "16",
        duration: "8 Weeks",
        status: "live",
        game: "bgmi",
        detailsLink: "tournament-details.html?tournament=bgmi-masters-championship&status=live",
        badge: "Pro League"
      },
      {
        id: 6,
        title: "PUBG Continental Series",
        description: "Regional championship bringing together the best teams from Asia, Europe, and Americas for an epic continental showdown.",
        prizePool: "$400K",
        teams: "40",
        duration: "6 Days",
        status: "registration",
        game: "pubg",
        detailsLink: "#",
        badge: "Continental"
      },
      {
        id: 7,
        title: "PUBG Global Championship 2024",
        description: "The concluded global championship where Team Liquid emerged victorious after an intense final battle against the world's best teams.",
        prizePool: "$600K",
        teams: "32",
        duration: "Completed",
        status: "completed",
        game: "pubg",
        detailsLink: "tournament-details.html?tournament=bgmi-championship-series&status=completed&winner=liquid",
        badge: "Champion",
        winner: {
          team: "Team Liquid",
          logo: "TL",
          members: ["ScreaM", "Jamppi", "soulcas", "Nivera"],
          prize: "$200,000"
        }
      },
      {
        id: 8,
        title: "BGMI Masters 2024 Finals",
        description: "Epic conclusion to the BGMI Masters where Soul dominated the competition with exceptional gameplay and strategic prowess.",
        prizePool: "$400K",
        teams: "24",
        duration: "Completed",
        status: "completed",
        game: "bgmi",
        detailsLink: "tournament-bgmi-masters.html?completed=true&winner=soul",
        badge: "Champion",
        winner: {
          team: "Team Soul",
          logo: "TS",
          members: ["Mortal", "Viper", "Clutchgod", "Regaltos"],
          prize: "$120,000"
        }
      },
      {
        id: 9,
        title: "PUBG Nations Cup 2024",
        description: "International tournament concluded with spectacular performances where Natus Vincere claimed the championship title.",
        prizePool: "$350K",
        teams: "28",
        duration: "Completed",
        status: "completed",
        game: "pubg",
        detailsLink: "tournament-championship-series.html?completed=true&winner=navi",
        badge: "Champion",
        winner: {
          team: "Natus Vincere",
          logo: "NV",
          members: ["s1mple", "electronic", "Perfecto", "b1t"],
          prize: "$100,000"
        }
      }
    ];

    let currentFilter = 'all';

    // API Configuration (Production)
    const API_BASE_URL = 'https://t2-237c.onrender.com';

    // Status configurations
    // Status configurations - standardized with admin dashboard
    const statusConfig = {
      upcoming: "Upcoming",
      registration_open: "Registration Open", 
      registration_closed: "Registration Closed",
      ongoing: "Ongoing",
      ended: "Ended",
      // Legacy status mappings for backward compatibility
      live: "Ongoing", // Map 'live' to 'ongoing'
      completed: "Ended", // Map 'completed' to 'ended'
      default: "Unknown"
    };

    // Function to normalize status values to match admin dashboard
    function normalizeStatus(status) {
      const statusMap = {
        'live': 'ongoing',
        'completed': 'ended',
        'cancelled': 'ended'
      };
      return statusMap[status] || status;
    }

    // Fetch tournaments from API
    async function fetchTournaments(filters = {}) {
      try {
        // Build query parameters
        const params = new URLSearchParams();
        if (filters.tournament_type) params.append('tournament_type', filters.tournament_type);
        if (filters.game) params.append('game', filters.game);
        if (filters.status) params.append('status', filters.status);
        if (filters.search) params.append('search', filters.search);
        params.append('limit', '100'); // Get more tournaments for better filtering
        
        const url = `${API_BASE_URL}/api/tournaments/all?${params.toString()}`;
        console.log('Fetching from:', url);
        const response = await fetch(url);

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();
        console.log('API Response:', result);

        if (result.success) {
          // Transform backend data to match frontend format
          return result.data.map(tournament => {
            return {
              id: tournament._id,
              slug: tournament.slug,
              title: tournament.title,
              description: tournament.description || '',
              game: tournament.game || 'Unknown',
              status: normalizeStatus(tournament.status),
              badge: getStatusBadge(normalizeStatus(tournament.status)),
              prizePool: tournament.prizePool || 0,
              maxTeams: tournament.maxTeams || 16,
              participants: tournament.participants || [],
              registrationStart: tournament.registrationStart,
              registrationEnd: tournament.registrationEnd,
              tournamentStart: tournament.tournamentStart,
              tournamentEnd: tournament.tournamentEnd,
              posterImage: tournament.posterImage,
              hostingType: tournament.hostingType || 'admin',
              organizerUsername: tournament.organizerUsername || 'Admin',
              organizerEmail: tournament.organizerEmail || '',
              detailsLink: `tournament-details.html?slug=${tournament.slug}`
            };
          });
        } else {
          throw new Error(result.error || 'Failed to fetch tournaments');
        }
      } catch (error) {
        console.error('Error fetching tournaments:', error);
        // Return empty array on error, let the UI handle the empty state
        return [];
      }
    }


    // Get status badge text
    function getStatusBadge(status) {
      const badges = {
        'upcoming': 'Coming Soon',
        'registration_open': 'Registration Open',
        'registration_closed': 'Registration Closed',
        'live': 'Live Now',
        'completed': 'Completed'
      };
      return badges[status] || 'Unknown';
    }

    // Create tournament card HTML
    function createTournamentCard(tournament) {
      const statusInfo = statusConfig[tournament.status] || statusConfig.default;

      // Calculate duration
      let duration = 'TBD';
      if (tournament.tournamentStart && tournament.tournamentEnd) {
        const startDate = new Date(tournament.tournamentStart);
        const endDate = new Date(tournament.tournamentEnd);
        const durationDays = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
        duration = durationDays === 1 ? '1 Day' : `${durationDays} Days`;
      }

      // Determine if we should show the register button
      const normalizedStatus = normalizeStatus(tournament.status);
      const showRegisterButton = normalizedStatus === 'registration_open';

      const actionsHTML = showRegisterButton ? `
        <div class="tournament-actions">
          <a href="${tournament.detailsLink}" class="btn-secondary">
            <i class="fas fa-info-circle"></i>
            View Details
          </a>
          <button class="btn-primary" onclick="handleRegistration('${tournament.slug}')">
            <i class="fas fa-user-plus"></i>
            Register
          </button>
        </div>
      ` : `
        <div class="tournament-actions">
          <a href="${tournament.detailsLink}" class="btn-primary" style="flex: 1;">
            <i class="fas fa-info-circle"></i>
            View Details
          </a>
        </div>
      `;

      // Format prize pool
      const prizePoolFormatted = tournament.prizePool ?
        `â‚¹${tournament.prizePool.toLocaleString()}` :
        'TBD';

      // Organizer information
      const organizerInfo = tournament.hostingType === 'user_hosted' ? `
        <div class="organizer-info" style="
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-bottom: 1rem;
          padding: 0.5rem;
          background: rgba(255, 215, 0, 0.1);
          border-radius: 8px;
          border-left: 3px solid var(--accent);
        ">
          <i class="fas fa-user-crown" style="color: var(--accent); font-size: 0.9rem;"></i>
          <div style="flex: 1;">
            <div style="font-size: 0.8rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px;">Organized by</div>
            <div style="font-weight: 600; color: var(--copy); font-size: 0.9rem;">${tournament.organizerUsername}</div>
          </div>
          <div class="hosting-badge" style="
            background: linear-gradient(135deg, var(--accent), #e0ac10);
            color: #000;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
          ">Community</div>
        </div>
      ` : `
        <div class="organizer-info" style="
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-bottom: 1rem;
          padding: 0.5rem;
          background: rgba(108, 117, 125, 0.1);
          border-radius: 8px;
          border-left: 3px solid #6c757d;
        ">
          <i class="fas fa-shield-alt" style="color: #6c757d; font-size: 0.9rem;"></i>
          <div style="flex: 1;">
            <div style="font-size: 0.8rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px;">Official Tournament</div>
            <div style="font-weight: 600; color: var(--copy); font-size: 0.9rem;">EArena</div>
          </div>
          <div class="hosting-badge" style="
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
          ">Official</div>
        </div>
      `;

      return `
        <div class="tournament-card" data-status="${normalizedStatus}" data-game="${tournament.game}" data-hosting-type="${tournament.hostingType}">
          <div class="tournament-image" style="background-image: url('${tournament.posterImage || 'https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'}'); background-size: cover; background-position: center;">
            <div class="tournament-badge">${statusConfig[normalizedStatus] || 'Unknown'}</div>
          </div>
          <div class="tournament-content">
            <h3 class="tournament-title">${tournament.title}</h3>
            <p class="tournament-description">${tournament.description || 'Join this exciting tournament and compete with the best players!'}</p>
            
            ${organizerInfo}
            
            <div class="tournament-stats">
              <div class="stat">
                <span class="stat-value">${prizePoolFormatted}</span>
                <span class="stat-label">Prize Pool</span>
              </div>
              <div class="stat">
                <span class="stat-value">${tournament.participants?.length || 0}/${tournament.maxTeams}</span>
                <span class="stat-label">Teams</span>
              </div>
              <div class="stat">
                <span class="stat-value">${duration}</span>
                <span class="stat-label">Duration</span>
              </div>
            </div>
            
            ${actionsHTML}
            
            <!-- Social Sharing -->
            <div class="social-sharing" style="
              display: flex;
              justify-content: center;
              gap: 0.5rem;
              margin-top: 1rem;
              padding-top: 1rem;
              border-top: 1px solid rgba(255, 255, 255, 0.1);
            ">
              <button onclick="shareOnTwitter('${tournament.title}', '${tournament.slug}')" class="share-btn" title="Share on Twitter">
                <i class="fab fa-twitter"></i>
              </button>
              <button onclick="shareOnFacebook('${tournament.title}', '${tournament.slug}')" class="share-btn" title="Share on Facebook">
                <i class="fab fa-facebook-f"></i>
              </button>
              <button onclick="shareOnWhatsApp('${tournament.title}', '${tournament.slug}')" class="share-btn" title="Share on WhatsApp">
                <i class="fab fa-whatsapp"></i>
              </button>
              <button onclick="copyTournamentLink('${tournament.slug}')" class="share-btn" title="Copy Link">
                <i class="fas fa-link"></i>
              </button>
            </div>
          </div>
        </div>
      `;
    }

    // Filter tournaments
    function filterTournaments(filter) {
      const cards = document.querySelectorAll('.tournament-card');
      let visibleCount = 0;

      cards.forEach(card => {
        const status = card.dataset.status;
        const game = card.dataset.game;
        const hostingType = card.dataset.hostingType;

        let show = false;

        if (filter === 'all') {
          show = true;
        } else if (filter === 'live' || filter === 'upcoming' || filter === 'registration_open') {
          show = status === filter;
        } else if (filter === 'admin') {
          show = hostingType === 'admin';
        } else if (filter === 'user_hosted') {
          show = hostingType === 'user_hosted';
        }

        if (show) {
          card.style.display = 'block';
          card.style.animation = 'fadeIn 0.3s ease-in-out';
          visibleCount++;
        } else {
          card.style.display = 'none';
        }
      });

      // Show message if no tournaments match the filter
      const grid = document.getElementById('tournaments-grid');
      const existingMessage = grid.querySelector('.filter-message');
      if (existingMessage) {
        existingMessage.remove();
      }

      if (visibleCount === 0 && cards.length > 0) {
        const message = document.createElement('div');
        message.className = 'filter-message';
        message.style.cssText = `
          grid-column: 1 / -1; 
          text-align: center; 
          padding: 3rem 1rem; 
          color: var(--muted);
        `;
        message.innerHTML = `
          <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
          <h3 style="margin-bottom: 0.5rem; color: var(--copy);">No tournaments found</h3>
          <p>No tournaments match the selected filter. Try a different category.</p>
        `;
        grid.appendChild(message);
      }
    }

    // Search tournaments
    function searchTournaments(query) {
      const cards = document.querySelectorAll('.tournament-card');
      let visibleCount = 0;

      cards.forEach(card => {
        const title = card.querySelector('.tournament-title').textContent.toLowerCase();
        const description = card.querySelector('.tournament-description').textContent.toLowerCase();
        const game = card.dataset.game.toLowerCase();

        const searchQuery = query.toLowerCase();
        const matches = title.includes(searchQuery) ||
          description.includes(searchQuery) ||
          game.includes(searchQuery);

        if (matches || query === '') {
          // Also check current filter
          const status = card.dataset.status;
          const gameType = card.dataset.game;
          const hostingType = card.dataset.hostingType;

          let showByFilter = false;
          if (currentFilter === 'all') {
            showByFilter = true;
          } else if (['live', 'upcoming', 'registration_open'].includes(currentFilter)) {
            showByFilter = status === currentFilter;
          } else if (currentFilter === 'admin') {
            showByFilter = hostingType === 'admin';
          } else if (currentFilter === 'user_hosted') {
            showByFilter = hostingType === 'user_hosted';
          }

          if (showByFilter) {
            card.style.display = 'block';
            visibleCount++;
          } else {
            card.style.display = 'none';
          }
        } else {
          card.style.display = 'none';
        }
      });

      // Show message if no tournaments match the search
      const grid = document.getElementById('tournaments-grid');
      const existingMessage = grid.querySelector('.search-message');
      if (existingMessage) {
        existingMessage.remove();
      }

      if (visibleCount === 0 && cards.length > 0) {
        const message = document.createElement('div');
        message.className = 'search-message';
        message.style.cssText = `
          grid-column: 1 / -1; 
          text-align: center; 
          padding: 3rem 1rem; 
          color: var(--muted);
        `;
        message.innerHTML = `
          <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
          <h3 style="margin-bottom: 0.5rem; color: var(--copy);">No tournaments found</h3>
          <p>No tournaments match your search "${query}". Try different keywords.</p>
        `;
        grid.appendChild(message);
      }
    }

    // Initialize page
    async function initializePage() {
      try {
        // Show loading
        document.getElementById('loading').style.display = 'block';
        document.getElementById('tournaments-grid').style.display = 'none';

        console.log('Fetching tournaments...');
        // Fetch tournaments from API
        const tournaments = await fetchTournaments();
        console.log('Fetched tournaments:', tournaments);

        // Populate tournaments grid
        const grid = document.getElementById('tournaments-grid');

        if (tournaments.length === 0) {
          // Show empty state
          grid.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 1rem; color: var(--muted);">
              <i class="fas fa-trophy" style="font-size: 4rem; margin-bottom: 1.5rem; opacity: 0.3;"></i>
              <h3 style="margin-bottom: 1rem; color: var(--copy); font-size: 1.5rem;">No Tournaments Available</h3>
              <p style="font-size: 1rem; line-height: 1.6; max-width: 400px; margin: 0 auto;">
                There are currently no tournaments scheduled. Check back soon for exciting new competitions!
              </p>
              <button onclick="initializePage()" style="margin-top: 1.5rem; padding: 0.75rem 1.5rem; background: var(--accent); color: #000; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                <i class="fas fa-sync-alt"></i> Refresh
              </button>
            </div>
          `;
        } else {
          grid.innerHTML = tournaments.map(tournament => createTournamentCard(tournament)).join('');
        }

        // Hide loading and show grid
        document.getElementById('loading').style.display = 'none';
        document.getElementById('tournaments-grid').style.display = 'grid';

        // Add filter event listeners
        document.querySelectorAll('.filter-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            // Update active filter
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Apply filter
            const filter = btn.dataset.filter;
            currentFilter = filter;

            // Clear search when changing filters
            const searchInput = document.getElementById('tournament-search');
            if (searchInput.value) {
              searchInput.value = '';
            }

            filterTournaments(filter);
          });
        });

        // Add search event listener
        const searchInput = document.getElementById('tournament-search');
        if (searchInput) {
          searchInput.addEventListener('input', (e) => {
            const query = e.target.value;
            searchTournaments(query);
          });

          // Add focus/blur effects
          searchInput.addEventListener('focus', () => {
            searchInput.style.borderColor = 'rgba(255, 215, 0, 0.5)';
            searchInput.style.background = 'rgba(255, 255, 255, 0.15)';
          });

          searchInput.addEventListener('blur', () => {
            searchInput.style.borderColor = 'rgba(255, 255, 255, 0.2)';
            searchInput.style.background = 'rgba(255, 255, 255, 0.1)';
          });
        }

        // Store tournaments globally for filtering
        window.tournamentsData = tournaments;

      } catch (error) {
        console.error('Error loading tournaments:', error);

        // Hide loading and show error state
        document.getElementById('loading').style.display = 'none';
        document.getElementById('tournaments-grid').style.display = 'block';
        document.getElementById('tournaments-grid').innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: var(--muted);">
            <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
            <h3 style="margin-bottom: 0.5rem; color: var(--copy);">Error Loading Tournaments</h3>
            <p style="margin-bottom: 1rem;">Unable to load tournaments. Please check your connection and try again.</p>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
              <button onclick="initializePage()" style="padding: 0.75rem 1.5rem; background: var(--accent); color: #000; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                <i class="fas fa-sync-alt"></i> Retry
              </button>
              <button onclick="loadFallbackData()" style="padding: 0.75rem 1.5rem; background: rgba(255, 255, 255, 0.1); color: var(--copy); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 6px; cursor: pointer; font-weight: 600;">
                <i class="fas fa-database"></i> Load Sample Data
              </button>
            </div>
          </div>
        `;
      }
    }

    // Load fallback sample data when API is unavailable
    function loadFallbackData() {
      console.log('Loading fallback tournament data...');

      const grid = document.getElementById('tournaments-grid');
      grid.innerHTML = tournamentsData.map(tournament => createTournamentCard(tournament)).join('');

      // Add filter event listeners
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          // Update active filter
          document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');

          // Apply filter
          const filter = btn.dataset.filter;
          currentFilter = filter;

          // Clear search when changing filters
          const searchInput = document.getElementById('tournament-search');
          if (searchInput.value) {
            searchInput.value = '';
          }

          filterTournaments(filter);
        });
      });

      // Add search event listener
      const searchInput = document.getElementById('tournament-search');
      if (searchInput) {
        searchInput.addEventListener('input', (e) => {
          const query = e.target.value;
          searchTournaments(query);
        });

        // Add focus/blur effects
        searchInput.addEventListener('focus', () => {
          searchInput.style.borderColor = 'rgba(255, 215, 0, 0.5)';
          searchInput.style.background = 'rgba(255, 255, 255, 0.15)';
        });

        searchInput.addEventListener('blur', () => {
          searchInput.style.borderColor = 'rgba(255, 255, 255, 0.2)';
          searchInput.style.background = 'rgba(255, 255, 255, 0.1)';
        });
      }

      // Store tournaments globally for filtering
      window.tournamentsData = tournamentsData;
    }

    // Header scroll effect
    window.addEventListener('scroll', () => {
      const header = document.querySelector('.site-header');
      if (window.scrollY > 100) {
        header.style.background = 'rgba(15, 15, 15, 0.9)';
        header.style.backdropFilter = 'blur(30px)';
      } else {
        header.style.background = 'rgba(26, 26, 26, 0.8)';
        header.style.backdropFilter = 'blur(20px)';
      }
    });

    // Add fade-in animation
    const style = document.createElement('style');
    style.textContent = `
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
    `;
    document.head.appendChild(style);



    // Handle URL parameters for filtering
    function handleUrlParams() {
      const urlParams = new URLSearchParams(window.location.search);
      const filter = urlParams.get('filter');

      if (filter && ['live', 'upcoming', 'registration_open', 'admin', 'user_hosted'].includes(filter)) {
        currentFilter = filter;

        // Update active filter button
        document.querySelectorAll('.filter-btn').forEach(btn => {
          btn.classList.remove('active');
          if (btn.dataset.filter === filter) {
            btn.classList.add('active');
          }
        });

        // Apply filter
        setTimeout(() => {
          filterTournaments(filter);
        }, 100);
      }
    }

    // Social sharing functions
    function shareOnTwitter(title, slug) {
      const url = `${window.location.origin}/tournament-details.html?slug=${slug}`;
      const text = `Check out this amazing tournament: ${title}`;
      const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}&hashtags=esports,gaming,tournament`;
      window.open(twitterUrl, '_blank', 'width=600,height=400');
    }

    function shareOnFacebook(title, slug) {
      const url = `${window.location.origin}/tournament-details.html?slug=${slug}`;
      const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
      window.open(facebookUrl, '_blank', 'width=600,height=400');
    }

    function shareOnWhatsApp(title, slug) {
      const url = `${window.location.origin}/tournament-details.html?slug=${slug}`;
      const text = `Check out this amazing tournament: ${title} - ${url}`;
      const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text)}`;
      window.open(whatsappUrl, '_blank');
    }

    function copyTournamentLink(slug) {
      const url = `${window.location.origin}/tournament-details.html?slug=${slug}`;
      navigator.clipboard.writeText(url).then(() => {
        // Show success feedback
        const btn = event.target.closest('.share-btn');
        const originalIcon = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check"></i>';
        btn.style.background = 'rgba(40, 167, 69, 0.2)';
        btn.style.color = '#28a745';
        
        setTimeout(() => {
          btn.innerHTML = originalIcon;
          btn.style.background = 'rgba(255, 255, 255, 0.1)';
          btn.style.color = 'var(--muted)';
        }, 2000);
      }).catch(() => {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = url;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        // Show success feedback
        const btn = event.target.closest('.share-btn');
        const originalIcon = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check"></i>';
        btn.style.background = 'rgba(40, 167, 69, 0.2)';
        btn.style.color = '#28a745';
        
        setTimeout(() => {
          btn.innerHTML = originalIcon;
          btn.style.background = 'rgba(255, 255, 255, 0.1)';
          btn.style.color = 'var(--muted)';
        }, 2000);
      });
    }

    // Handle registration button clicks
    function handleRegistration(tournamentSlug) {
      // Check if user is authenticated
      const session = localStorage.getItem('nexus_session') || sessionStorage.getItem('nexus_session');

      if (!session) {
        alert('Please log in to register for tournaments');
        redirectToAuth();
        return;
      }

      // User is already logged in, redirect directly to team registration
      window.location.href = `team-registration.html?slug=${tournamentSlug}`;
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize authentication first
      initializeProfileDropdown();
      checkUserAuthentication();
      
      // Then initialize page content
      initializePage().then(() => {
        handleUrlParams();
        
        // Add search functionality
        const searchInput = document.getElementById('tournament-search');
        if (searchInput) {
          searchInput.addEventListener('input', (e) => {
            searchTournaments(e.target.value);
          });
        }
        
        // Add filter functionality
        const filterButtons = document.querySelectorAll('.filter-btn');
        filterButtons.forEach(btn => {
          btn.addEventListener('click', () => {
            // Remove active class from all buttons
            filterButtons.forEach(b => b.classList.remove('active'));
            // Add active class to clicked button
            btn.classList.add('active');
            // Filter tournaments
            filterTournaments(btn.dataset.filter);
          });
        });
      }).catch(error => {
        console.error('Failed to initialize page:', error);
        // Load fallback data if API fails
        loadFallbackData();
        handleUrlParams();
      });

    // Mobile Navigation Functions
    function openMobileNav() {
      const mobileNav = document.getElementById('mobile-nav');
      if (mobileNav) {
        mobileNav.hidden = false;
        mobileNav.classList.add('is-open');
      }
    }

    function closeMobileNav() {
      const mobileNav = document.getElementById('mobile-nav');
      if (mobileNav) {
        mobileNav.classList.remove('is-open');
        setTimeout(() => {
          mobileNav.hidden = true;
        }, 400);
      }
    }

    // Add hamburger click event
    document.addEventListener('DOMContentLoaded', () => {
      const hamburger = document.querySelector('.hamburger');
      if (hamburger) {
        hamburger.addEventListener('click', openMobileNav);
      }
    });
    });

    // Authentication handling
    function checkUserAuthentication() {
      const session = localStorage.getItem('nexus_session') || sessionStorage.getItem('nexus_session');

      if (session) {
        try {
          const sessionData = JSON.parse(session);
          const user = sessionData.user;
          const userRoles = user?.roles || [];

          // Update navigation for logged-in users
          const authButtons = document.querySelector('.nav-actions');
          if (authButtons) {
            authButtons.innerHTML = `
              <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="color: var(--copy); font-weight: 600;">${user.username}</span>
                ${userRoles.includes('admin') ? '<span style="background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: #000; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem; font-weight: 700;">Admin</span>' : ''}
                <button onclick="logout()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: var(--copy); padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-weight: 600;">
                  <i class="fas fa-sign-out-alt"></i> Logout
                </button>
              </div>
            `;
          }

          return true;
        } catch (error) {
          console.error('Invalid session data:', error);
          return false;
        }
      }

      return false;
    }

    async function logout() {
      try {
        const session = localStorage.getItem('earena_session') || sessionStorage.getItem('earena_session');

        if (session) {
          const sessionData = JSON.parse(session);

          // Call logout API
          await fetch(`${API_BASE_URL}/api/auth/logout`, {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${sessionData.token}`,
              'Content-Type': 'application/json'
            }
          });
        }
      } catch (error) {
        console.error('Logout API error:', error);
      } finally {
        localStorage.removeItem('earena_session');
        sessionStorage.removeItem('earena_session');
        window.location.reload();
      }
    }

    // Profile dropdown functionality
    function initializeProfileDropdown() {
      const session = localStorage.getItem('earena_session') || sessionStorage.getItem('earena_session');

      if (session) {
        try {
          const sessionData = JSON.parse(session);
          const user = sessionData.user;

          // Show user menu, hide guest menu
          document.getElementById('user-menu').style.display = 'flex';
          document.getElementById('guest-menu').style.display = 'none';

          // Update profile info
          document.getElementById('modal-username').textContent = user.username || user.email || 'User';

          // Show admin badge if user is admin
          const roleBadge = document.getElementById('modal-role-badge');
          const dashboardLink = document.getElementById('modal-dashboard-link');

          if (user.role === 'admin') {
            roleBadge.style.display = 'inline-block';
            roleBadge.textContent = 'Admin';
            dashboardLink.href = 'admin-dashboard.html';
            dashboardLink.innerHTML = '<i class="fas fa-shield-alt"></i><span>Admin Dashboard</span>';
          } else {
            roleBadge.style.display = 'none';
            dashboardLink.href = 'user-dashboard.html';
            dashboardLink.innerHTML = '<i class="fas fa-user"></i><span>My Account</span>';
          }
        } catch (error) {
          console.error('Error parsing session data:', error);
          // Show guest menu if session is invalid
          document.getElementById('user-menu').style.display = 'none';
          document.getElementById('guest-menu').style.display = 'flex';
        }
      } else {
        // Show guest menu if no session
        document.getElementById('user-menu').style.display = 'none';
        document.getElementById('guest-menu').style.display = 'flex';
      }
    }


    
    // =========================
    // NAVBAR JAVASCRIPT (Embedded)
    // =========================
    
    // --- NAVBAR HELPER FUNCTIONS ---
    function redirectToAuth(tab = 'register') {
      const returnUrl = encodeURIComponent(window.location.href);
      window.location.href = `auth.html?tab=${tab}&returnUrl=${returnUrl}`;
    }

    function getSessionData() {
      const session = localStorage.getItem('nexus_session') || sessionStorage.getItem('nexus_session');
      try {
        return session ? JSON.parse(session) : null;
      } catch (error) {
        return null;
      }
    }

    function logout() {
      localStorage.removeItem('nexus_session');
      sessionStorage.removeItem('nexus_session');
      window.location.reload(); // Reload the current page to update the nav
    }

    // --- NAVBAR LOGIC ---
    function checkUserAuthentication() {
      const sessionData = getSessionData();
      const guestMenu = document.getElementById('guest-menu');
      const userMenu = document.getElementById('user-menu');
      const user = sessionData?.data?.user || sessionData?.user;

      if (user) {
        document.getElementById('modal-username').textContent = user.username || user.email.split('@')[0];
        if (guestMenu) guestMenu.style.display = 'none';
        if (userMenu) userMenu.style.display = 'flex';
      } else {
        if (guestMenu) guestMenu.style.display = 'flex';
        if (userMenu) userMenu.style.display = 'none';
      }
    }

    function setupMobileNav() {
      const sessionData = getSessionData();
      const mobileNavContainer = document.getElementById('mobile-nav');
      const user = sessionData?.data?.user || sessionData?.user;

      const closeButtonHTML = `<button class="mobile-nav-close" aria-label="Close menu"><i class="fas fa-times"></i></button>`;
      
      // Contextual navigation links based on current page
      let navLinksHTML = '';
      const currentPage = window.location.pathname.split('/').pop();
      
      if (currentPage === 'index.html' || currentPage === '') {
        // Homepage navigation
        navLinksHTML = `
          <div class="mobile-nav-links">
            <a href="tournaments.html">Tournaments</a>
            <a href="user-dashboard.html"><i class="fas fa-plus-circle"></i> Host Tournament</a>
            <a href="#why-us">Why Us</a>
            <a href="#faq">FAQ</a>
          </div>
        `;
      } else {
        // All pages now use the same simplified navigation
        navLinksHTML = '';
      }
      
      let userSectionHTML = '';
      let bottomActionsHTML = '';

      if (user) {
        // Logged-in user view
        const username = user.username || user.email.split('@')[0];
        const userId = user.id || user.user_id || 'N/A';
        userSectionHTML = `
          <div class="profile-header">
            <div class="profile-photo"><i class="fas fa-user"></i></div>
            <div class="profile-info">
              <div class="profile-username">${username}</div>
              <div class="profile-userid">ID: ${userId}</div>
            </div>
          </div>
          <div class="profile-actions">
            <a href="user-dashboard.html" class="profile-action">
              <i class="fas fa-tachometer-alt"></i> <span>Dashboard</span>
            </a>
            <a href="tournaments.html" class="profile-action">
              <i class="fas fa-trophy"></i> <span>Browse Tournaments</span>
            </a>
            <a href="user-dashboard.html" class="profile-action">
              <i class="fas fa-list"></i> <span>My Tournaments</span>
            </a>
          </div>
        `;
        bottomActionsHTML = `
          <div class="mobile-nav-bottom-actions">
            <a href="user-dashboard.html?tab=create" class="mobile-host-btn">
              <i class="fas fa-plus-circle"></i> Host
            </a>
            <button class="mobile-logout-btn" onclick="logout()">
              <i class="fas fa-sign-out-alt"></i> Logout
            </button>
          </div>
        `;
      } else {
        // Guest view
        userSectionHTML = `
          <div class="guest-view">
            <i class="fas fa-gamepad"></i>
            <p>Join the arena to compete, win prizes, and track your stats!</p>
          </div>
          <div class="profile-actions">
            <a href="user-dashboard.html" class="profile-action">
              <i class="fas fa-tachometer-alt"></i> <span>Dashboard</span>
            </a>
            <a href="tournaments.html" class="profile-action">
              <i class="fas fa-trophy"></i> <span>Browse Tournaments</span>
            </a>
            <a href="user-dashboard.html" class="profile-action">
              <i class="fas fa-list"></i> <span>My Tournaments</span>
            </a>
          </div>
        `;
        bottomActionsHTML = `
          <div class="mobile-nav-bottom-actions">
            <button class="mobile-join-btn" onclick="redirectToAuth()">
              <i class="fas fa-user-plus"></i> Join Us
            </button>
          </div>
        `;
      }

      // Combine the parts into the final HTML for the panel
      mobileNavContainer.innerHTML = `
        ${closeButtonHTML}
        ${userSectionHTML}
        ${navLinksHTML}
        ${bottomActionsHTML}
      `;

      // Add click handlers for navigation links to close mobile menu
      setTimeout(() => {
        const hostBtn = mobileNavContainer.querySelector('.mobile-host-btn');
        const navLinks = mobileNavContainer.querySelectorAll('.profile-action');
        const logoutBtn = mobileNavContainer.querySelector('.mobile-logout-btn');
        const joinBtn = mobileNavContainer.querySelector('.mobile-join-btn');
        
        if (hostBtn) {
          hostBtn.addEventListener('click', () => {
            // Close mobile nav when host button is clicked
            const mobileNav = document.getElementById('mobile-nav');
            if (mobileNav) {
              mobileNav.classList.remove('is-open');
            }
          });
        }

        if (logoutBtn) {
          logoutBtn.addEventListener('click', () => {
            // Close mobile nav when logout button is clicked
            const mobileNav = document.getElementById('mobile-nav');
            if (mobileNav) {
              mobileNav.classList.remove('is-open');
            }
          });
        }

        if (joinBtn) {
          joinBtn.addEventListener('click', () => {
            // Close mobile nav when join button is clicked
            const mobileNav = document.getElementById('mobile-nav');
            if (mobileNav) {
              mobileNav.classList.remove('is-open');
            }
          });
        }

        // Close mobile nav when any navigation link is clicked
        navLinks.forEach(link => {
          link.addEventListener('click', () => {
            const mobileNav = document.getElementById('mobile-nav');
            if (mobileNav) {
              mobileNav.classList.remove('is-open');
            }
          });
        });
      }, 100);
    }

    // --- NAVBAR INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
      const hamburger = document.querySelector('.hamburger');
      const mobileNav = document.getElementById('mobile-nav');

      if (!hamburger || !mobileNav) {
          console.error("Navbar elements not found. Make sure the HTML is included.");
          return;
      }
      
      function closeMobileNav() {
        mobileNav.classList.remove('is-open');
        hamburger.setAttribute('aria-expanded', 'false');
      }

      hamburger.addEventListener('click', () => {
        const isOpen = mobileNav.classList.toggle('is-open');
        hamburger.setAttribute('aria-expanded', isOpen);
      });

      document.addEventListener('click', (event) => {
        if (!mobileNav.classList.contains('is-open')) return;
        const closeButton = event.target.closest('.mobile-nav-close');
        if (closeButton) {
          closeMobileNav();
          return;
        }
        const isClickInsideNav = event.target.closest('#mobile-nav');
        const isClickOnHamburger = event.target.closest('.hamburger');
        if (!isClickInsideNav && !isClickOnHamburger) {
          closeMobileNav();
        }
      });
      
      // Set up the content of the navbars
      checkUserAuthentication();
      setupMobileNav();
    });

  </script>
</body>

</html>